const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/twips-UDB2NAAU-Df7xFDYp.js","assets/index-D8KeoEpY.js","assets/index-BTp3LQ9z.css","assets/search-dynamic-sgs-side-events-RIRYKEP5-D7VBVHkx.js","assets/chunk-AVOUJS6N-Cd3WHora.js","assets/search-dynamic-solve-4x4x4-4UB4NMF3-CsoGLUn4.js","assets/search-dynamic-solve-fto-HZREG6ZH-Ccf72yFZ.js","assets/search-dynamic-sgs-unofficial-N4CRUF4Q-BzAHzoGw.js","assets/search-dynamic-solve-kilominx-GCNVEBDJ-CjkedZ_I.js","assets/search-dynamic-solve-master_tetraminx-GIS7T5B7-D46Tl9Im.js"])))=>i.map(i=>d[i]);
import{f as b,T as x,b as h,_ as S,s as W,K as $,c as d,p,d as V,m,g as j,r as q,h as H,A as z,i as J,j as Z,M as Q,k as X}from"./index-D8KeoEpY.js";import{e as Y}from"./search-worker-entry-DT_GT_hX.js";var ee=class extends x{traverseAlg(e){let r=0;for(const t of e.childAlgNodes())r+=this.traverseAlgNode(t);return r}traverseGrouping(e){return this.traverseAlg(e.alg)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 0}traverseLineComment(e){return 0}};b(ee);var y=class extends x{constructor(e){super(),this.metric=e}traverseAlg(e){let r=0;for(const t of e.childAlgNodes())r+=this.traverseAlgNode(t);return r}traverseGrouping(e){const r=e.alg;return this.traverseAlg(r)*Math.abs(e.amount)}traverseMove(e){return this.metric(e)}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 0}traverseNewline(e){return 0}traverseLineComment(e){return 0}},re=class extends x{traverseAlg(e){let r=0;for(const t of e.childAlgNodes())r+=this.traverseAlgNode(t);return r}traverseGrouping(e){const r=e.alg;return this.traverseAlg(r)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 1}traverseLineComment(e){return 1}};function F(e){return"A"<=e&&e<="Z"}function te(e){const r=e.family;return F(r[0])&&r[r.length-1]==="v"||r==="x"||r==="y"||r==="z"||r==="T"?0:1}function ae(e){return 1}function N(e){const r=e.family;return F(r[0])&&r[r.length-1]==="v"||r==="x"||r==="y"||r==="z"||r==="T"?0:1}function ne(e){return Math.abs(e.amount)*N(e)}var ie=b(y,[te]);b(y,[ae]);b(y,[ne]);b(y,[N]);b(re,[]);var se=2;function oe(e,r){const t=[];for(const a of r){const n=new Q(a);if(n.amount!==1)throw new Error("SGS cannot handle def moves with an amount other than 1 yet.");let i=e.identityTransformation();for(let v=1;i=i.applyMove(n),!i.isIdentityTransformation();v++)t.push({move:n.modified({amount:v}),transformation:i})}return t}var _=class{constructor(e,r,t){this.kpuzzle=e,this.sgs=r,this.searchMoves=oe(this.kpuzzle,t??Object.keys(this.kpuzzle.definition.moves))}searchMoves;async solve(e,r=se,t){const a=e.experimentalToTransformation();if(!a)throw new Error("distinguishable pieces are not supported in tremble solver yt");let n=null,i=1e6;const v=(l,g,c)=>{if(g===0){const o=this.sgsPhaseSolve(l,i);if(!o)return;const f=c.concat(o).experimentalSimplify({cancel:{directional:"any-direction",puzzleSpecificModWrap:"canonical-centered"},puzzleSpecificSimplifyOptions:{quantumMoveOrder:t}}),u=ie(f);(n===null||u<i)&&(n=f,i=u);return}for(const o of this.searchMoves)v(l.applyTransformation(o.transformation),g-1,c.concat([o.move]))};for(let l=0;l<=r;l++)v(a,l,new z);if(n===null)throw new Error("SGS search failed.");return n}sgsPhaseSolve(e,r){const t=new Z;let a=e;for(const n of this.sgs.ordering){const i=n.pieceOrdering;let v="";const l=a.invert();for(let c=0;c<i.length;c++){const o=i[c],f=o.orbitName,u=o.permutationIdx;v+=` ${l.transformationData[f].permutation[u]} ${l.transformationData[f].orientationDelta[u]}`}const g=n.lookup[v];if(!g)throw new Error("Missing algorithm in sgs or esgs?");if(t.experimentalPushAlg(g.alg),t.experimentalNumAlgNodes()>=r)return null;a=a.applyTransformation(g.transformation);for(let c=0;c<i.length;c++){const o=i[c],f=o.orbitName,u=o.permutationIdx;if(a.transformationData[f].permutation[u]!==u||a.transformationData[f].orientationDelta[u]!==0)throw new Error("bad SGS :-(")}}return t.toAlg()}},M=h(async()=>S(()=>import("./twips-UDB2NAAU-Df7xFDYp.js"),__vite__mapDeps([0,1,2])));async function B(e,r,t){const{wasmTwips:a}=await M;return a(e,r,t)}async function ce(e){const{wasmRandomScrambleForEvent:r}=await M;return r(e)}async function le(e,r,t){const{wasmDeriveScrambleForEvent:a}=await M;return a(e,r,t)}var w=h(()=>S(()=>import("./search-dynamic-sgs-side-events-RIRYKEP5-D7VBVHkx.js"),__vite__mapDeps([3,1,2,4]))),P=null;async function ue(){return P||(P=(async()=>{const e=await(await w).cachedData222();return new _(await p["2x2x2"].kpuzzle(),e,"URFLBD".split(""))})())}async function me(){await ue()}async function ve(e){return m(),B((await j.kpuzzle()).definition,e,{generatorMoves:"UFLR".split("")})}var I=h(()=>S(()=>import("./search-dynamic-solve-4x4x4-4UB4NMF3-CsoGLUn4.js"),__vite__mapDeps([5,1,2]))),fe=[[null,"x","x2","x'","z","z'"],[null,"y","y2","y'"]];async function de(){return(await I).initialize()}async function U(){return m(),(await I).random444Scramble()}async function we(){return J(await U(),fe)}var he=h(()=>S(()=>import("./search-dynamic-solve-fto-HZREG6ZH-Ccf72yFZ.js"),__vite__mapDeps([6,1,2])));h(()=>S(()=>import("./search-dynamic-sgs-unofficial-N4CRUF4Q-BzAHzoGw.js"),__vite__mapDeps([7,4,1,2])));async function Se(){return m(),new z(await(await he).getRandomFTOScramble())}var pe=h(()=>S(()=>import("./search-dynamic-solve-kilominx-GCNVEBDJ-CjkedZ_I.js"),__vite__mapDeps([8,1,2])));async function ge(){return m(),(await pe).getRandomKilominxScramble()}var be=h(()=>S(()=>import("./search-dynamic-solve-master_tetraminx-GIS7T5B7-D46Tl9Im.js"),__vite__mapDeps([9,1,2])));async function ye(){return m(),new z(await(await be).randomMasterTetraminxScrambleString())}var _e=2,R=null;async function Ee(){return R||(R=(async()=>{const e=await(await w).cachedSGSDataMegaminx();return new _(await(await w).cachedMegaminxKPuzzleWithoutMO(),e,["U","R","F","L","BR","BL","FR","FL","DR","DL","B","D"])})())}async function Te(e){m();const r=await Ee(),t=structuredClone(e.patternData);t.CENTERS.orientation=new Array(12).fill(0);const a=new d(await(await w).cachedMegaminxKPuzzleWithoutMO(),t);return await r.solve(a,_e,()=>5)}var Ae=3,D=null;async function xe(){return D||(D=(async()=>{const e=await(await w).sgsDataPyraminx();return new _(await p.pyraminx.kpuzzle(),e,"RLUB".split(""))})())}async function ze(e){return m(),await(await xe()).solve(e,Ae,()=>3)}var Me=h(()=>S(()=>import("./search-dynamic-sgs-unofficial-N4CRUF4Q-BzAHzoGw.js"),__vite__mapDeps([7,4,1,2])));async function Pe(){return m(),(await Me).getRandomRediCubeScramble()}var Re=3,O=null;async function De(){return O||(O=(async()=>{const e=await(await w).sgsDataSkewb();return new _(await(await w).skewbKPuzzleWithoutMOCached(),e,"RLUB".split(""))})())}async function Oe(e){return new d(await(await w).skewbKPuzzleWithoutMOCached(),{CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})}async function Le(e){return m(),await(await De()).solve(await Oe(e),Re,a=>a.family==="y"?4:3)}var Ce=1e3;W(!0);var K=!0;function ke(e){K=e}function L(){return(typeof performance>"u"?Date:performance).now()}async function s(e,r,t){if(!K)return r();const a=L(),n=r();n?.then&&await n;const i=L();return console.warn(`${e}${t?.isPrefetch?" (prefetched)":""}: ${Math.round(i-a)}ms`),n}var E=new Map,T=null,C;async function k(e,r){return C=(async()=>{await C;function t(){return s(`wasmRandomScrambleForEvent(${JSON.stringify(e)})`,()=>ce(e),{isPrefetch:r?.isPrefetch})}switch(e){case"222":return(await t()).experimentalSimplify({puzzleSpecificSimplifyOptions:{quantumMoveOrder:()=>4}});case"555":case"666":case"777":case"333fm":case"clock":case"minx":case"pyram":case"skewb":case"sq1":case"555bf":case"baby_fto":return t();case"333":case"333oh":case"333ft":return s("random333Scramble",H,{isPrefetch:r?.isPrefetch});case"333bf":case"333mbf":return s("random333OrientedScramble",q);case"444":return s("random444Scramble",U,{isPrefetch:r?.isPrefetch});case"444bf":return s("random444OrientedScramble",we);case"fto":return s("randomFTOScramble",Se,{isPrefetch:r?.isPrefetch});case"master_tetraminx":return s("randomMasterTetraminxScramble",ye);case"kilominx":return s("randomKilominxScramble",ge,{isPrefetch:r?.isPrefetch});case"redi_cube":return s("randomRediCubeScramble",Pe,{isPrefetch:r?.isPrefetch});default:throw new Error(`unsupported event: ${e}`)}})()}var A="auto",G={initialize:async e=>{switch(e){case"222":return s("preInitialize222",me);case"333":case"333oh":case"333ft":return s("initialize333",X);case"444":return s("initialize444",de);default:throw new Error(`unsupported event: ${e}`)}},setScramblePrefetchLevel(e){A=e},randomScrambleForEvent:async e=>{let r=E.get(e);return r?E.delete(e):r=k(e),A!=="none"&&r.then(()=>{T&&clearTimeout(T),T=setTimeout(()=>{E.set(e,k(e,{isPrefetch:!0}))},A==="immediate"?0:Ce)}),r},randomScrambleStringForEvent:async e=>(await G.randomScrambleForEvent(e)).toString(),deriveScrambleStringForEvent:async(e,r,t)=>(await s(`deriveScrambleForEvent(â€¦, ${JSON.stringify(t)})`,()=>le(e,r,t))).toString(),solve333ToString:async e=>{const r=new d(await p["3x3x3"].kpuzzle(),e);return(await V(r)).toString()},solve222ToString:async e=>{const r=new d(await p["2x2x2"].kpuzzle(),e);return(await ve(r)).toString()},solveSkewbToString:async e=>{const r=new d(await p.skewb.kpuzzle(),e);return(await Le(r)).toString()},solvePyraminxToString:async e=>{const r=new d(await p.pyraminx.kpuzzle(),e);return(await ze(r)).toString()},solveMegaminxToString:async e=>{const r=new d(await p.megaminx.kpuzzle(),e);return(await Te(r)).toString()},setDebugMeasurePerf:async e=>{ke(e)},solveTwipsToString:async(e,r,t)=>{const a=new $(e),n=new d(a,r);return(await B(e,n,t)).toString()}};Y(G);

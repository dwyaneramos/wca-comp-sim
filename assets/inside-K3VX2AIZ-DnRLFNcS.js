import{e as Yt}from"./search-worker-entry-DogQjDK2.js";var ct=class{is(e){return this instanceof e}as(e){return this instanceof e?this:null}},G=class extends ct{constructor(){super()}get log(){return console.log.bind(console,this,this.toString())}};function Jt(e,t=!0){if(!t)return e;switch(e){case 1:return-1;case-1:return 1}}function en(e,t){return t===-1?Array.from(e).reverse():e}function tn(e){return Array.from(e).reverse()}var L=class Be extends G{#e;#t;constructor(t,n){super(),this.#e=oe(t),this.#t=oe(n)}get A(){return this.#e}get B(){return this.#t}isIdentical(t){const n=t.as(Be);return!!(n?.A.isIdentical(this.A)&&n?.B.isIdentical(this.B))}invert(){return new Be(this.#t,this.#e)}*experimentalExpand(t=1,n){n??=1/0,n===0?yield t===1?this:this.invert():t===1?(yield*this.A.experimentalExpand(1,n-1),yield*this.B.experimentalExpand(1,n-1),yield*this.A.experimentalExpand(-1,n-1),yield*this.B.experimentalExpand(-1,n-1)):(yield*this.B.experimentalExpand(1,n-1),yield*this.A.experimentalExpand(1,n-1),yield*this.B.experimentalExpand(-1,n-1),yield*this.A.experimentalExpand(-1,n-1))}toString(t){return`[${this.#e.toString(t)}, ${this.#t.toString(t)}]`}},F=class ze extends G{#e;#t;constructor(t,n){super(),this.#e=oe(t),this.#t=oe(n)}get A(){return this.#e}get B(){return this.#t}isIdentical(t){const n=t.as(ze);return!!(n?.A.isIdentical(this.A)&&n?.B.isIdentical(this.B))}invert(){return new ze(this.#e,this.#t.invert())}*experimentalExpand(t,n){n??=1/0,n===0?yield t===1?this:this.invert():(yield*this.A.experimentalExpand(1,n-1),yield*this.B.experimentalExpand(t,n-1),yield*this.A.experimentalExpand(-1,n-1))}toString(t){return`[${this.A.toString(t)}: ${this.B.toString(t)}]`}},Ne=2147483647,Ae="2^31 - 1",nn=-2147483648,Ie=class{#e=[];push(e){this.#e.push(e)}experimentalPushAlg(e){for(const t of e.childAlgNodes())this.push(t)}experimentalNumAlgNodes(){return this.#e.length}toAlg(){return new f(this.#e)}reset(){this.#e=[]}},le=class mt extends G{#e;constructor(t){if(super(),t.includes(`
`)||t.includes("\r"))throw new Error("LineComment cannot contain newline");this.#e=t}get text(){return this.#e}isIdentical(t){const n=t;return t.is(mt)&&this.#e===n.#e}invert(){return this}*experimentalExpand(t=1,n=1/0){yield this}toString(t){return`//${this.#e}`}},$=class ft extends G{toString(t){return`
`}isIdentical(t){return t.is(ft)}invert(){return this}*experimentalExpand(t=1,n=1/0){yield this}},E=class pt extends G{experimentalNISSGrouping;toString(t){return"."}isIdentical(t){return t.is(pt)}invert(){return this}*experimentalExpand(t=1,n=1/0){yield this}};function me(e,t){return e?parseInt(e,10):t}var $e=/^(\d+)?('?)/,rn=/^[_\dA-Za-z]/,an=/^((([1-9]\d*)-)?([1-9]\d*))?([_A-Za-z]+)/,on=/^[^\n]*/,sn=/^(-?\d+), ?/,un=/^(-?\d+)\)/;function dt(e){return new Oe().parseAlg(e)}function ln(e){return new Oe().parseMove(e)}function cn(e){return new Oe().parseQuantumMove(e)}var re=Symbol("startCharIndex"),ie=Symbol("endCharIndex");function y(e,t,n){const r=e;return r[re]=t,r[ie]=n,r}function mn(e,t){return re in e&&(t[re]=e[re]),ie in e&&(t[ie]=e[ie]),t}var Oe=class{#e="";#t=0;#n=[];parseAlg(e){this.#e=e,this.#t=0;const t=this.parseAlgWithStopping([]);this.mustBeAtEndOfInput();const n=Array.from(t.childAlgNodes());if(this.#n.length>0)for(const s of this.#n.reverse())n.push(s);const r=new f(n),{[re]:i,[ie]:o}=t;return y(r,i,o),r}parseMove(e){this.#e=e,this.#t=0;const t=this.parseMoveImpl();return this.mustBeAtEndOfInput(),t}parseQuantumMove(e){this.#e=e,this.#t=0;const t=this.parseQuantumMoveImpl();return this.mustBeAtEndOfInput(),t}mustBeAtEndOfInput(){if(this.#t!==this.#e.length)throw new Error("parsing unexpectedly ended early")}parseAlgWithStopping(e){let t=this.#t,n=this.#t;const r=new Ie;let i=!1;const o=s=>{if(i)throw new Error(`Unexpected character at index ${s}. Are you missing a space?`)};for(;this.#t<this.#e.length;){const s=this.#t;if(e.includes(this.#e[this.#t]))return y(r.toAlg(),t,n);if(this.tryConsumeNext(" "))i=!1,r.experimentalNumAlgNodes()===0&&(t=this.#t);else if(rn.test(this.#e[this.#t])){o(s);const u=this.parseMoveImpl();r.push(u),i=!0,n=this.#t}else if(this.tryConsumeNext("(")){o(s);const u=this.tryRegex(sn);if(u){const l=u[1],c=this.#t,d=this.parseRegex(un),h=y(new a(new C("U_SQ_"),parseInt(l,10)),s+1,s+1+l.length),m=y(new a(new C("D_SQ_"),parseInt(d[1],10)),c,this.#t-1),v=y(new f([h,m]),s+1,this.#t-1);r.push(y(new z(v),s,this.#t)),i=!0,n=this.#t}else{const l=this.parseAlgWithStopping([")"]);this.mustConsumeNext(")");const c=this.parseAmount();r.push(y(new z(l,c),s,this.#t)),i=!0,n=this.#t}}else if(this.tryConsumeNext("^")){this.mustConsumeNext("(");const u=this.parseAlgWithStopping([")"]);this.popNext();const l=new z(u,-1),c=new E;l.experimentalNISSPlaceholder=c,c.experimentalNISSGrouping=l,this.#n.push(l),r.push(c)}else if(this.tryConsumeNext("[")){o(s);const u=this.parseAlgWithStopping([",",":"]),l=this.popNext(),c=this.parseAlgWithStopping(["]"]);this.mustConsumeNext("]");let d;switch(l){case":":{d=y(new F(u,c),s,this.#t),i=!0,n=this.#t;break}case",":{d=y(new L(u,c),s,this.#t),i=!0,n=this.#t;break}default:throw new Error("unexpected parsing error")}const h=this.#t,m=this.parseAmount();if(m===1)r.push(d);else{const v=y(new f([d]),s,h),p=y(new z(v,m),s,this.#t);r.push(p)}i=!0,n=this.#t}else if(this.tryConsumeNext(`
`))r.push(y(new $,s,this.#t)),i=!1,n=this.#t;else if(this.tryConsumeNext("/"))if(this.tryConsumeNext("/")){o(s);const[u]=this.parseRegex(on);r.push(y(new le(u),s,this.#t)),i=!1,n=this.#t}else r.push(y(new a("_SLASH_"),s,this.#t)),i=!0,n=this.#t;else if(this.tryConsumeNext("."))o(s),r.push(y(new E,s,this.#t)),i=!0,n=this.#t;else throw new Error(`Unexpected character: ${this.popNext()}`)}if(this.#t!==this.#e.length)throw new Error("did not finish parsing?");if(e.length>0)throw new Error("expected stopping");return y(r.toAlg(),t,n)}parseQuantumMoveImpl(){const[,,,e,t,n]=this.parseRegex(an);return new C(n,me(t,void 0),me(e,void 0))}parseMoveImpl(){const e=this.#t;if(this.tryConsumeNext("/"))return y(new a("_SLASH_"),e,this.#t);let t=this.parseQuantumMoveImpl(),[n,r]=this.parseAmountAndTrackEmptyAbsAmount();const i=this.parseMoveSuffix();if(i){if(n<0)throw new Error("uh-oh");if((i==="++"||i==="--")&&n!==1)throw new Error("Pochmann ++ or -- moves cannot have an amount other than 1.");if((i==="++"||i==="--")&&!r)throw new Error("Pochmann ++ or -- moves cannot have an amount written as a number.");if((i==="+"||i==="-")&&r)throw new Error("Clock dial moves must have an amount written as a natural number followed by + or -.");i.startsWith("+")&&(t=t.modified({family:`${t.family}_${i==="+"?"PLUS":"PLUSPLUS"}_`})),i.startsWith("-")&&(t=t.modified({family:`${t.family}_${i==="-"?"PLUS":"PLUSPLUS"}_`}),n*=-1)}return y(new a(t,n),e,this.#t)}parseMoveSuffix(){return this.tryConsumeNext("+")?this.tryConsumeNext("+")?"++":"+":this.tryConsumeNext("-")?this.tryConsumeNext("-")?"--":"-":null}parseAmountAndTrackEmptyAbsAmount(){const e=this.#t,[,t,n]=this.parseRegex($e);if(t?.startsWith("0")&&t!=="0")throw new Error(`Error at char index ${e}: An amount can only start with 0 if it's exactly the digit 0.`);return[me(t,1)*(n==="'"?-1:1),!t]}parseAmount(){const e=this.#t,[,t,n]=this.parseRegex($e);if(t?.startsWith("0")&&t!=="0")throw new Error(`Error at char index ${e}: An amount number can only start with 0 if it's exactly the digit 0.`);return me(t,1)*(n==="'"?-1:1)}parseRegex(e){const t=e.exec(this.remaining());if(t===null)throw new Error("internal parsing error");return this.#t+=t[0].length,t}tryRegex(e){const t=e.exec(this.remaining());return t===null?null:(this.#t+=t[0].length,t)}remaining(){return this.#e.slice(this.#t)}popNext(){const e=this.#e[this.#t];return this.#t++,e}tryConsumeNext(e){return this.#e[this.#t]===e?(this.#t++,!0):!1}mustConsumeNext(e){const t=this.popNext();if(t!==e)throw new Error(`expected \`${e}\` while parsing, encountered ${t}`);return t}},Qe=new Set;function ht(e){Qe.has(e)||(console.warn(e),Qe.add(e))}var Pe=class{quantum;amount;constructor(e,t=1){if(this.quantum=e,this.amount=t,!Number.isInteger(this.amount)||this.amount<nn||this.amount>Ne)throw new Error(`AlgNode amount absolute value must be a non-negative integer below ${Ae}.`)}suffix(){let e="";const t=Math.abs(this.amount);return t!==1&&(e+=t),this.amount<0&&(e+="'"),e}isIdentical(e){return this.quantum.isIdentical(e.quantum)&&this.amount===e.amount}*experimentalExpand(e,t){const n=Math.abs(this.amount),r=Jt(e,this.amount<0);for(let i=0;i<n;i++)yield*this.quantum.experimentalExpand(r,t)}},C=class Te extends ct{#e;#t;#n;constructor(t,n,r){if(super(),this.#e=t,this.#t=n??null,this.#n=r??null,Object.freeze(this),this.#t!==null&&(!Number.isInteger(this.#t)||this.#t<1||this.#t>Ne))throw new Error(`QuantumMove inner layer must be a positive integer below ${Ae}.`);if(this.#n!==null&&(!Number.isInteger(this.#n)||this.#n<1||this.#n>Ne))throw new Error(`QuantumMove outer layer must be a positive integer below ${Ae}.`);if(this.#n!==null&&this.#t!==null&&this.#t<=this.#n)throw new Error("QuantumMove outer layer must be smaller than inner layer.");if(this.#n!==null&&this.#t===null)throw new Error("QuantumMove with an outer layer must have an inner layer")}static fromString(t){return cn(t)}modified(t){return new Te(t.family??this.#e,t.innerLayer??this.#t,t.outerLayer??this.#n)}isIdentical(t){const n=t;return t.is(Te)&&this.#e===n.#e&&this.#t===n.#t&&this.#n===n.#n}get family(){return this.#e}get outerLayer(){return this.#n}get innerLayer(){return this.#t}experimentalExpand(){throw new Error("experimentalExpand() cannot be called on a `QuantumMove` directly.")}toString(t){let n=this.#e;return this.#t!==null&&(n=String(this.#t)+n,this.#n!==null&&(n=`${String(this.#n)}-${n}`)),n}},a=class Z extends G{#e;constructor(...t){if(super(),typeof t[0]=="string")if(t[1]??null){this.#e=new Pe(C.fromString(t[0]),t[1]);return}else return Z.fromString(t[0]);this.#e=new Pe(t[0],t[1])}isIdentical(t){const n=t.as(Z);return!!n&&this.#e.isIdentical(n.#e)}invert(){return mn(this,new Z(this.#e.quantum,this.#n()?this.amount:-this.amount))}*experimentalExpand(t=1){t===1?yield this:yield this.modified({amount:-this.amount})}get quantum(){return this.#e.quantum}modified(t){return new Z(this.#e.quantum.modified(t),t.amount??this.amount)}static fromString(t){return ln(t)}get amount(){return this.#e.amount}get type(){return ht("deprecated: type"),"blockMove"}get family(){return this.#e.quantum.family??void 0}get outerLayer(){return this.#e.quantum.outerLayer??void 0}get innerLayer(){return this.#e.quantum.innerLayer??void 0}#t;#n(){return this.isIdentical(this.#t??=new Z("_SLASH_"))}toString(t){if(t?.notation!=="LGN"){if(this.#n())return"/";if(this.family.endsWith("_PLUS_"))return this.#e.quantum.toString().slice(0,-6)+Math.abs(this.amount)+(this.amount<0?"-":"+");if(this.family.endsWith("_PLUSPLUS_")){const n=Math.abs(this.amount);return this.#e.quantum.toString().slice(0,-10)+(n===1?"":n)+(this.amount<0?"--":"++")}}return this.#e.quantum.toString(t)+this.#e.suffix()}},fn=class{quantumU_SQ_=null;quantumD_SQ_=null;format(e,t){if(t?.notation==="LGN"||e.amount!==1)return null;const n=this.tuple(e);return n?`(${n.map(r=>r.amount).join(", ")})`:null}tuple(e){if(e.amount!==1)return null;this.quantumU_SQ_||=new C("U_SQ_"),this.quantumD_SQ_||=new C("D_SQ_");const t=e.alg;if(t.experimentalNumChildAlgNodes()===2){const[n,r]=t.childAlgNodes();if(n.as(a)?.quantum.isIdentical(this.quantumU_SQ_)&&r.as(a)?.quantum.isIdentical(this.quantumD_SQ_))return[n,r]}return null}},Re=new fn,z=class ne extends G{#e;experimentalNISSPlaceholder;constructor(t,n){super();const r=oe(t);this.#e=new Pe(r,n)}isIdentical(t){const n=t;return t.is(ne)&&this.#e.isIdentical(n.#e)}get alg(){return this.#e.quantum}get amount(){return this.#e.amount}modified(t){return new ne(t.alg??this.alg,t.amount??this.amount)}get experimentalRepetitionSuffix(){return this.#e.suffix()}invert(){const t=Re.tuple(this);if(t){const[n,r]=t;return new ne(new f([n.invert(),r.invert()]))}return new ne(this.#e.quantum,-this.#e.amount)}*experimentalExpand(t=1,n){n??=1/0,n===0?yield t===1?this:this.invert():yield*this.#e.experimentalExpand(t,n-1)}static fromString(){throw new Error("unimplemented")}#t(t){const n=this.#e.quantum.toString(t),r=this.alg.childAlgNodes(),{value:i}=r.next();return r.next().done&&(i?.is(L)||i?.is(F))?n:`(${n})`}toString(t){return Re.format(this,t)??`${this.#t(t)}${this.#e.suffix()}`}experimentalAsSquare1Tuple(){return Re.tuple(this)}};function U(e,t){return e instanceof t}function pn(e){return U(e,z)||U(e,le)||U(e,L)||U(e,F)||U(e,a)||U(e,$)||U(e,E)}var dn="any-direction",wt=class{constructor(e={}){this.config=e}cancelQuantum(){const{cancel:e}=this.config;return e===!0?dn:e===!1?"none":e?.directional??"none"}cancelAny(){return this.config.cancel&&this.cancelQuantum()!=="none"}cancelPuzzleSpecificModWrap(){const{cancel:e}=this.config;return e===!0||e===!1?"canonical-centered":e?.puzzleSpecificModWrap?e?.puzzleSpecificModWrap:e?.directional==="same-direction"?"preserve-sign":"canonical-centered"}puzzleSpecificSimplifyOptions(){return this.config.puzzleLoader?.puzzleSpecificSimplifyOptions??this.config.puzzleSpecificSimplifyOptions}};function hn(e,t){return e*Math.sign(t.amount)>=0}function wn(e,t,n=0){return((e-n)%t+t)%t+n}function gn(e,t,n){const r=new wt(n),i=Array.from(e.childAlgNodes());let o=[t];function s(){return new f([...i,...o])}function u(l){if(r.cancelPuzzleSpecificModWrap()==="none")return l;const c=r.puzzleSpecificSimplifyOptions()?.quantumMoveOrder;if(!c)return l;const d=c(t.quantum);let h;switch(r.cancelPuzzleSpecificModWrap()){case"gravity":{h=-Math.floor((d-(l.amount<0?0:1))/2);break}case"canonical-centered":{h=-Math.floor((d-1)/2);break}case"canonical-positive":{h=0;break}case"preserve-sign":{h=l.amount<0?1-d:0;break}default:throw new Error("Unknown mod wrap")}const m=wn(l.amount,d,h);return l.modified({amount:m})}if(r.cancelAny()){let l;const c=r.puzzleSpecificSimplifyOptions()?.axis;if(c)l=p=>c.areQuantumMovesSameAxis(t.quantum,p.quantum);else{const p=t.quantum.toString();l=x=>x.quantum.toString()===p}const d=r.cancelQuantum()==="same-direction",h=new Map;h.set(t.quantum.toString(),Math.sign(t.amount));let m;for(m=i.length-1;m>=0;m--){const p=i[m].as(a);if(!p||!l(p))break;const x=p.quantum.toString();if(d){const N=h.get(x);if(N&&!hn(N,p))break;h.set(x,Math.sign(p.amount))}}const v=[...i.splice(m+1),t];if(c)o=c.simplifySameAxisMoves(v,r.cancelPuzzleSpecificModWrap()!=="none");else{const p=v.reduce((x,N)=>x+N.amount,0);if(h.size!==1)throw new Error("Internal error: multiple quantums when one was expected");o=[new a(t.quantum,p)]}}return o=o.map(l=>u(l)).filter(l=>l.amount!==0),s()}function vn(e,t,n){const r=t.as(a);return r?gn(e,r,n):new f([...e.childAlgNodes(),t])}function gt(e,t,n){if(t.is(z))return e.traverseGrouping(t,n);if(t.is(a))return e.traverseMove(t,n);if(t.is(L))return e.traverseCommutator(t,n);if(t.is(F))return e.traverseConjugate(t,n);if(t.is(E))return e.traversePause(t,n);if(t.is($))return e.traverseNewline(t,n);if(t.is(le))return e.traverseLineComment(t,n);throw new Error("unknown AlgNode")}function vt(e){if(e.is(z)||e.is(a)||e.is(L)||e.is(F)||e.is(E)||e.is($)||e.is(le))return e;throw new Error("internal error: expected AlgNode")}var we=class{traverseAlgNode(e,t){return gt(this,e,t)}traverseIntoAlgNode(e,t){return vt(this.traverseAlgNode(e,t))}},Me=class extends we{traverseAlgNode(e){return gt(this,e,void 0)}traverseIntoAlgNode(e){return vt(this.traverseAlgNode(e))}};function I(e,t){const n=new e(...t??[]);return n.traverseAlg.bind(n)}var xn=class extends we{#e;#t(){return this.#e??=new Map}#n(e){return{...e,depth:e.depth?e.depth-1:null}}*traverseAlg(e,t){if(t.depth===0){yield*e.childAlgNodes();return}let n=[];const r=this.#n(t);for(const i of e.childAlgNodes())for(const o of this.traverseAlgNode(i,r))n=Array.from(vn(new f(n),o,r).childAlgNodes());for(const i of n)yield i}*traverseGrouping(e,t){if(t.depth===0){yield e;return}if(e.amount===0)return;const n=new z(this.traverseAlg(e.alg,this.#n(t)),e.amount);if(n.alg.experimentalIsEmpty())return;const r=this.#t().get(e);r&&(n.experimentalNISSPlaceholder=r,r.experimentalNISSGrouping=n),yield n}*traverseMove(e,t){yield e}#r(e,t,n){if(e.experimentalNumChildAlgNodes()===1&&t.experimentalNumChildAlgNodes()===1){const r=Array.from(e.childAlgNodes())[0]?.as(a),i=Array.from(t.childAlgNodes())[0]?.as(a);if(!(r&&i))return!1;if(i.quantum.isIdentical(r.quantum)||new wt(n).puzzleSpecificSimplifyOptions()?.axis?.areQuantumMovesSameAxis(r.quantum,i.quantum))return!0}return!1}*traverseCommutator(e,t){if(t.depth===0){yield e;return}const n=this.#n(t),r=new L(this.traverseAlg(e.A,n),this.traverseAlg(e.B,n));r.A.experimentalIsEmpty()||r.B.experimentalIsEmpty()||r.A.isIdentical(r.B)||r.A.isIdentical(r.B.invert())||this.#r(r.A,r.B,t)||(yield r)}*traverseConjugate(e,t){if(t.depth===0){yield e;return}const n=this.#n(t),r=new F(this.traverseAlg(e.A,n),this.traverseAlg(e.B,n));if(!r.B.experimentalIsEmpty()){if(r.A.experimentalIsEmpty()||r.A.isIdentical(r.B)||r.A.isIdentical(r.B.invert())||this.#r(r.A,r.B,t)){yield*e.B.childAlgNodes();return}yield r}}*traversePause(e,t){if(e.experimentalNISSGrouping){const n=new E;this.#t().set(e.experimentalNISSGrouping,n),yield n}else yield e}*traverseNewline(e,t){yield e}*traverseLineComment(e,t){yield e}},yn=I(xn);function Ve(e){if(!e)return[];if(U(e,f))return e.childAlgNodes();if(typeof e=="string")return dt(e).childAlgNodes();const t=e;if(typeof t[Symbol.iterator]=="function")return t;throw new Error("Invalid AlgNode")}function oe(e){return U(e,f)?e:new f(e)}var f=class X extends G{#e;constructor(t){super(),this.#e=Array.from(Ve(t));for(const n of this.#e)if(!pn(n))throw new Error("An alg can only contain alg nodes.")}isIdentical(t){const n=t;if(!t.is(X))return!1;const r=Array.from(this.#e),i=Array.from(n.#e);if(r.length!==i.length)return!1;for(let o=0;o<r.length;o++)if(!r[o].isIdentical(i[o]))return!1;return!0}invert(){return new X(tn(Array.from(this.#e).map(t=>t.invert())))}*experimentalExpand(t=1,n){n??=1/0;for(const r of en(this.#e,t))yield*r.experimentalExpand(t,n)}expand(t){return new X(this.experimentalExpand(1,t?.depth??1/0))}*experimentalLeafMoves(){for(const t of this.experimentalExpand())t.is(a)&&(yield t)}concat(t){return new X(Array.from(this.#e).concat(Array.from(Ve(t))))}experimentalIsEmpty(){for(const t of this.#e)return!1;return!0}static fromString(t){return dt(t)}units(){return this.childAlgNodes()}*childAlgNodes(){for(const t of this.#e)yield t}experimentalNumUnits(){return this.experimentalNumChildAlgNodes()}experimentalNumChildAlgNodes(){return Array.from(this.#e).length}get type(){return ht("deprecated: type"),"sequence"}toString(t){let n="",r=null;for(const i of this.#e){r&&(n+=Dn(r,i));const o=i.as(E)?.experimentalNISSGrouping;if(o){if(o.amount!==-1)throw new Error("Invalid NISS Grouping amount!");n+=`^(${o.alg.toString(t)})`}else i.as(z)?.experimentalNISSPlaceholder||(n+=i.toString(t));r=i}return n}experimentalSimplify(t){return new X(yn(this,t??{}))}simplify(t){return this.experimentalSimplify(t)}};function Dn(e,t){return e.is($)||t.is($)||t.as(z)?.experimentalNISSPlaceholder?"":e.is(le)&&!t.is($)?`
`:" "}new f([new a("R",1),new a("U",1),new a("R",-1),new a("U",1),new a("R",1),new a("U",-2),new a("R",-1)]),new f([new a("R",1),new a("U",2),new a("R",-1),new a("U",-1),new a("R",1),new a("U",-1),new a("R",-1)]),new f([new L(new f([new a("R",1),new a("U",1),new a("R",-2)]),new f([new F(new f([new a("R",1)]),new f([new a("U",1)]))]))]),new f([new a("R",1),new a("U",-1),new a("L",-1),new a("U",1),new a("R",-1),new a("U",-1),new a("L",1),new a("U",1)]),new f([new a("x",-1),new L(new f([new F(new f([new a("R",1)]),new f([new a("U",-1)]))]),new f([new a("D",1)])),new L(new f([new F(new f([new a("R",1)]),new f([new a("U",1)]))]),new f([new a("D",1)])),new a("x",1)]),new f([new F(new f([new a("F",1)]),new f([new L(new f([new a("U",1)]),new f([new a("R",1)]))]))]),new f([new F(new f([new a("R",2)]),new f([new L(new f([new a("F",2)]),new f([new a("R",-1),new a("B",-1),new a("R",1)]))]))]),new f([new a("F",1),new a("U",1),new a("R",1),new a("U",-1),new a("R",-1),new a("F",-1)]),new f([new a("R",1),new a("U",1),new a("R",-1),new a("U",-1),new a("R",-1),new a("F",1),new a("R",2),new a("U",-1),new a("R",-1),new a("U",-1),new a("R",1),new a("U",1),new a("R",-1),new a("F",-1)]),new f([new F(new f([new a("F",1)]),new f([new z(new f([new L(new f([new a("R",1)]),new f([new a("U",1)]))]),3)]))]),new f([new E,new E,new E]);function ke(e,t,n){const r={};for(const i of e.orbits){const o=t[i.orbitName],s=n[i.orbitName];if(de(i.numOrientations,s))r[i.orbitName]=o;else if(de(i.numOrientations,o))r[i.orbitName]=s;else{const u=new Array(i.numPieces);if(i.numOrientations===1){for(let l=0;l<i.numPieces;l++)u[l]=o.permutation[s.permutation[l]];r[i.orbitName]={permutation:u,orientationDelta:o.orientationDelta}}else{const l=new Array(i.numPieces);for(let c=0;c<i.numPieces;c++)l[c]=(o.orientationDelta[s.permutation[c]]+s.orientationDelta[c])%i.numOrientations,u[c]=o.permutation[s.permutation[c]];r[i.orbitName]={permutation:u,orientationDelta:l}}}}return r}function He(e,t,n){const r={};for(const i of e.orbits){const o=t[i.orbitName],s=n[i.orbitName];if(de(i.numOrientations,s))r[i.orbitName]=o;else{const u=new Array(i.numPieces);if(i.numOrientations===1){for(let c=0;c<i.numPieces;c++)u[c]=o.pieces[s.permutation[c]];const l={pieces:u,orientation:o.orientation};r[i.orbitName]=l}else{const l=new Array(i.numPieces),c=o.orientationMod?new Array(i.numPieces):void 0;for(let h=0;h<i.numPieces;h++){const m=s.permutation[h];let v=i.numOrientations;if(o.orientationMod){const p=o.orientationMod[m];c[h]=p,v=p||i.numOrientations}l[h]=(o.orientation[m]+s.orientationDelta[h])%v,u[h]=o.pieces[m]}const d={pieces:u,orientation:l};c&&(d.orientationMod=c),r[i.orbitName]=d}}}return r}var je=new Map;function Sn(e){const t=je.get(e);if(t)return t;const n=new Array(e),r=new Array(e);for(let o=0;o<e;o++)n[o]=o,r[o]=0;const i={permutation:n,orientationDelta:r};return je.set(e,i),i}function Rn(e){const t={};for(const n of e.orbits)t[n.orbitName]=Sn(n.numPieces);return t}function Ln(e,t){function n(i,o){const s=i.toString(),u=e.definition.moves[s];if(u)return J(e,u,o);const l=e.definition.derivedMoves?.[s];if(l)return J(e,e.algToTransformation(l).transformationData,o)}const r=n(t.quantum,t.amount)??n(t,1)??n(t.invert,-1);if(r)return r;throw new Error(`Invalid move for KPuzzle (${e.name()}): ${t}`)}var Y=class q{constructor(t,n){this.kpuzzle=t,this.transformationData=n}toJSON(){return{experimentalPuzzleName:this.kpuzzle.name(),transformationData:this.transformationData}}invert(){return new q(this.kpuzzle,xt(this.kpuzzle,this.transformationData))}#e;isIdentityTransformation(){return this.#e??=this.isIdentical(this.kpuzzle.identityTransformation())}static experimentalConstructIdentity(t){const n=new q(t,Rn(t.definition));return n.#e=!0,n}isIdentical(t){return bn(this.kpuzzle,this.transformationData,t.transformationData)}apply(t){return this.applyTransformation(this.kpuzzle.toTransformation(t))}applyTransformation(t){if(this.kpuzzle!==t.kpuzzle)throw new Error(`Tried to apply a transformation for a KPuzzle (${t.kpuzzle.name()}) to a different KPuzzle (${this.kpuzzle.name()}).`);return this.#e?new q(this.kpuzzle,t.transformationData):t.#e?new q(this.kpuzzle,this.transformationData):new q(this.kpuzzle,ke(this.kpuzzle.definition,this.transformationData,t.transformationData))}applyMove(t){return this.applyTransformation(this.kpuzzle.moveToTransformation(t))}applyAlg(t){return this.applyTransformation(this.kpuzzle.algToTransformation(t))}toKPattern(){return b.fromTransformation(this)}repetitionOrder(){return An(this.kpuzzle.definition,this)}selfMultiply(t){return new q(this.kpuzzle,J(this.kpuzzle,this.transformationData,t))}};function de(e,t){t.permutation||console.log(t);const{permutation:n}=t,r=n.length;for(let i=0;i<r;i++)if(n[i]!==i)return!1;if(e>1){const{orientationDelta:i}=t;for(let o=0;o<r;o++)if(i[o]!==0)return!1}return!0}function Fn(e,t,n,r={}){for(let i=0;i<e.numPieces;i++)if(!r?.ignorePieceOrientations&&t.orientationDelta[i]!==n.orientationDelta[i]||!r?.ignorePiecePermutation&&t.permutation[i]!==n.permutation[i])return!1;return!0}function bn(e,t,n){for(const r of e.definition.orbits)if(!Fn(r,t[r.orbitName],n[r.orbitName]))return!1;return!0}function En(e,t,n,r={}){for(let i=0;i<e.numPieces;i++)if(!r?.ignorePieceOrientations&&(t.orientation[i]!==n.orientation[i]||(t.orientationMod?.[i]??0)!==(n.orientationMod?.[i]??0))||!r?.ignorePieceIndices&&t.pieces[i]!==n.pieces[i])return!1;return!0}function Bn(e,t,n){for(const r of e.definition.orbits)if(!En(r,t[r.orbitName],n[r.orbitName]))return!1;return!0}function xt(e,t){const n={};for(const r of e.definition.orbits){const i=t[r.orbitName];if(de(r.numOrientations,i))n[r.orbitName]=i;else if(r.numOrientations===1){const o=new Array(r.numPieces);for(let s=0;s<r.numPieces;s++)o[i.permutation[s]]=s;n[r.orbitName]={permutation:o,orientationDelta:i.orientationDelta}}else{const o=new Array(r.numPieces),s=new Array(r.numPieces);for(let u=0;u<r.numPieces;u++){const l=i.permutation[u];o[l]=u,s[l]=(r.numOrientations-i.orientationDelta[u]+r.numOrientations)%r.numOrientations}n[r.orbitName]={permutation:o,orientationDelta:s}}}return n}function J(e,t,n){if(n===1)return t;if(n<0)return J(e,xt(e,t),-n);if(n===0){const{transformationData:o}=e.identityTransformation();return o}let r=t;n!==2&&(r=J(e,t,Math.floor(n/2)));const i=ke(e.definition,r,r);return n%2===0?i:ke(e.definition,t,i)}var zn=class extends we{traverseAlg(e,t){let n=null;for(const r of e.childAlgNodes())n?n=n.applyTransformation(this.traverseAlgNode(r,t)):n=this.traverseAlgNode(r,t);return n??t.identityTransformation()}traverseGrouping(e,t){const n=this.traverseAlg(e.alg,t);return new Y(t,J(t,n.transformationData,e.amount))}traverseMove(e,t){return t.moveToTransformation(e)}traverseCommutator(e,t){const n=this.traverseAlg(e.A,t),r=this.traverseAlg(e.B,t);return n.applyTransformation(r).applyTransformation(n.invert()).applyTransformation(r.invert())}traverseConjugate(e,t){const n=this.traverseAlg(e.A,t),r=this.traverseAlg(e.B,t);return n.applyTransformation(r).applyTransformation(n.invert())}traversePause(e,t){return t.identityTransformation()}traverseNewline(e,t){return t.identityTransformation()}traverseLineComment(e,t){return t.identityTransformation()}},Nn=I(zn);function Ue(e,t){return t?Ue(t,e%t):e}function An(e,t){let n=1;for(const r of e.orbits){const i=t.transformationData[r.orbitName],o=new Array(r.numPieces);for(let s=0;s<r.numPieces;s++)if(!o[s]){let u=s,l=0,c=0;for(;o[u]=!0,l=l+i.orientationDelta[u],c=c+1,u=i.permutation[u],u!==s;);l!==0&&(c=c*r.numOrientations/Ue(r.numOrientations,Math.abs(l))),n=n*c/Ue(n,c)}}return n}var b=class fe{constructor(t,n){this.kpuzzle=t,this.patternData=n}toJSON(){return{experimentalPuzzleName:this.kpuzzle.name(),patternData:this.patternData}}static fromTransformation(t){const n=He(t.kpuzzle.definition,t.kpuzzle.definition.defaultPattern,t.transformationData);return new fe(t.kpuzzle,n)}apply(t){return this.applyTransformation(this.kpuzzle.toTransformation(t))}applyTransformation(t){if(t.isIdentityTransformation())return new fe(this.kpuzzle,this.patternData);const n=He(this.kpuzzle.definition,this.patternData,t.transformationData);return new fe(this.kpuzzle,n)}applyMove(t){return this.applyTransformation(this.kpuzzle.moveToTransformation(t))}applyAlg(t){return this.applyTransformation(this.kpuzzle.algToTransformation(t))}isIdentical(t){return Bn(this.kpuzzle,this.patternData,t.patternData)}experimentalToTransformation(){if(!this.kpuzzle.canConvertDefaultPatternToUniqueTransformation())return null;const t={};for(const[n,r]of Object.entries(this.patternData)){const i={permutation:r.pieces,orientationDelta:r.orientation};t[n]=i}return new Y(this.kpuzzle,t)}experimentalIsSolved(t){if(!this.kpuzzle.definition.experimentalIsPatternSolved)throw new Error("`KPattern.experimentalIsPatternSolved()` is not supported for this puzzle at the moment.");return this.kpuzzle.definition.experimentalIsPatternSolved(this,t)}},ge=class{constructor(e,t){this.definition=e,this.experimentalPGNotation=t?.experimentalPGNotation}experimentalPGNotation;#e;lookupOrbitDefinition(e){return this.#e||=(()=>{const t={};for(const n of this.definition.orbits)t[n.orbitName]=n;return t})(),this.#e[e]}name(){return this.definition.name}identityTransformation(){return Y.experimentalConstructIdentity(this)}#t=new Map;moveToTransformation(e){typeof e=="string"&&(e=new a(e));const t=e.toString(),n=this.#t.get(t);if(n)return new Y(this,n);if(this.experimentalPGNotation){const i=this.experimentalPGNotation.lookupMove(e);if(!i)throw new Error(`could not map to internal move: ${e}`);return this.#t.set(t,i),new Y(this,i)}const r=Ln(this,e);return this.#t.set(t,r),new Y(this,r)}algToTransformation(e){return typeof e=="string"&&(e=new f(e)),Nn(e,this)}toTransformation(e){return typeof e=="string"?this.algToTransformation(e):e?.is?.(f)?this.algToTransformation(e):e?.is?.(a)?this.moveToTransformation(e):e}defaultPattern(){return new b(this,this.definition.defaultPattern)}#n;canConvertDefaultPatternToUniqueTransformation(){return this.#n??=(()=>{for(const e of this.definition.orbits){const t=new Array(e.numPieces).fill(!1);for(const n of this.definition.defaultPattern[e.orbitName].pieces)t[n]=!0;for(const n of t)if(!n)return!1}return!0})()}},yt=class pe extends Promise{constructor(t){super(n=>{n()}),this._executor=t}static from(t){return new pe(n=>{n(t())})}static resolve(t){return new pe(n=>{n(t)})}static reject(t){return new pe((n,r)=>{r(t)})}then(t,n){return this._promise=this._promise||new Promise(this._executor),this._promise.then(t,n)}catch(t){return this._promise=this._promise||new Promise(this._executor),this._promise.catch(t)}};function T(e){return new yt(t=>{t(e())})}var W=class{stickerings=new Map;constructor(e,t){for(const n of e.definition.orbits)this.stickerings.set(n.orbitName,new Array(n.numPieces).fill(t))}},A="regular",w="ignored",j="oriented",Pn="experimentalOriented2",ee="invisible",_="dim",te="mystery",Tn={Regular:{facelets:[A,A,A,A,A]},Ignored:{facelets:[w,w,w,w,w]},OrientationStickers:{facelets:[j,j,j,j,j]},IgnoreNonPrimary:{facelets:[A,w,w,w,w]},Invisible:{facelets:[ee,ee,ee,ee,ee]},PermuteNonPrimary:{facelets:[_,A,A,A,A]},Dim:{facelets:[_,_,_,_,_]},Ignoriented:{facelets:[_,w,w,w,w]},OrientationWithoutPermutation:{facelets:[j,w,w,w,w]},ExperimentalOrientationWithoutPermutation2:{facelets:[Pn,w,w,w,w]},Mystery:{facelets:[te,te,te,te,te]}};function kn(e){return Tn[e]}var Dt=class extends W{constructor(e){super(e,"Regular")}set(e,t){for(const[n,r]of this.stickerings.entries())for(let i=0;i<r.length;i++)e.stickerings.get(n)[i]&&(r[i]=t);return this}toStickeringMask(){const e={orbits:{}};for(const[t,n]of this.stickerings.entries()){const r=[],i={pieces:r};e.orbits[t]=i;for(const o of n)r.push(kn(o))}return e}},St=class{constructor(e){this.kpuzzle=e}and(e){const t=new W(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)e:for(let r=0;r<n.numPieces;r++){t.stickerings.get(n.orbitName)[r]=!0;for(const i of e)if(!i.stickerings.get(n.orbitName)[r]){t.stickerings.get(n.orbitName)[r]=!1;continue e}}return t}or(e){const t=new W(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)e:for(let r=0;r<n.numPieces;r++){t.stickerings.get(n.orbitName)[r]=!1;for(const i of e)if(i.stickerings.get(n.orbitName)[r]){t.stickerings.get(n.orbitName)[r]=!0;continue e}}return t}not(e){const t=new W(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)for(let r=0;r<n.numPieces;r++)t.stickerings.get(n.orbitName)[r]=!e.stickerings.get(n.orbitName)[r];return t}all(){return this.and(this.moves([]))}move(e){const t=this.kpuzzle.moveToTransformation(e),n=new W(this.kpuzzle,!1);for(const r of this.kpuzzle.definition.orbits)for(let i=0;i<r.numPieces;i++)(t.transformationData[r.orbitName].permutation[i]!==i||t.transformationData[r.orbitName].orientationDelta[i]!==0)&&(n.stickerings.get(r.orbitName)[i]=!0);return n}moves(e){return e.map(t=>this.move(t))}orbits(e){const t=new W(this.kpuzzle,!1);for(const n of e)t.stickerings.get(n).fill(!0);return t}orbitPrefix(e){const t=new W(this.kpuzzle,!1);for(const n of this.kpuzzle.definition.orbits)n.orbitName.startsWith(e)&&t.stickerings.get(n.orbitName).fill(!0);return t}},Ze="Last Layer",Xe="Last Slot",B={"3x3x3":Ze,megaminx:Ze},O={"3x3x3":Xe,megaminx:Xe},Un={full:{groups:{"3x3x3":"Stickering",megaminx:"Stickering"}},OLL:{groups:B},PLL:{groups:B},LL:{groups:B},EOLL:{groups:B},COLL:{groups:B},OCLL:{groups:B},CPLL:{groups:B},CLL:{groups:B},EPLL:{groups:B},ELL:{groups:B},ZBLL:{groups:B},LS:{groups:O},LSOLL:{groups:O},LSOCLL:{groups:O},ELS:{groups:O},CLS:{groups:O},ZBLS:{groups:O},VLS:{groups:O},WVLS:{groups:O},F2L:{groups:{"3x3x3":"CFOP (Fridrich)"}},Daisy:{groups:{"3x3x3":"CFOP (Fridrich)"}},Cross:{groups:{"3x3x3":"CFOP (Fridrich)"}},EO:{groups:{"3x3x3":"ZZ"}},EOline:{groups:{"3x3x3":"ZZ"}},EOcross:{groups:{"3x3x3":"ZZ"}},FirstBlock:{groups:{"3x3x3":"Roux"}},SecondBlock:{groups:{"3x3x3":"Roux"}},CMLL:{groups:{"3x3x3":"Roux"}},L10P:{groups:{"3x3x3":"Roux"}},L6E:{groups:{"3x3x3":"Roux"}},L6EO:{groups:{"3x3x3":"Roux"}},"2x2x2":{groups:{"3x3x3":"Petrus"}},"2x2x3":{groups:{"3x3x3":"Petrus"}},EODF:{groups:{"3x3x3":"Nautilus"}},G1:{groups:{"3x3x3":"FMC"}},L2C:{groups:{"4x4x4":"Reduction","5x5x5":"Reduction","6x6x6":"Reduction"}},OBL:{groups:{"2x2x2":"General"}},PBL:{groups:{"2x2x2":"Ortega"}},"Void Cube":{groups:{"3x3x3":"Miscellaneous"}},invisible:{groups:{"3x3x3":"Miscellaneous"}},picture:{groups:{"3x3x3":"Miscellaneous"}},"centers-only":{groups:{"3x3x3":"Miscellaneous"}},"opposite-centers":{groups:{"4x4x4":"Reduction"}},"experimental-centers-U":{},"experimental-centers-U-D":{},"experimental-centers-U-L-D":{},"experimental-centers-U-L-B-D":{},"experimental-centers":{},"experimental-fto-fc":{groups:{fto:"Bencisco"}},"experimental-fto-f2t":{groups:{fto:"Bencisco"}},"experimental-fto-sc":{groups:{fto:"Bencisco"}},"experimental-fto-l2c":{groups:{fto:"Bencisco"}},"experimental-fto-lbt":{groups:{fto:"Bencisco"}},"experimental-fto-l3t":{groups:{fto:"Bencisco"}}};async function se(e,t){return(await Cn(e,t)).toStickeringMask()}async function Cn(e,t){const n=await e.kpuzzle(),r=new Dt(n),i=new St(n),o=()=>i.move("U"),s=()=>i.or(i.moves(["U","D"])),u=()=>i.or(i.moves(["L","R"])),l=()=>i.not(u()),c=()=>i.not(o()),d=()=>i.orbitPrefix("CENTER"),h=Se=>i.and([i.move(Se),d()]),m=()=>i.orbitPrefix("EDGE"),v=Se=>i.and([i.and(i.moves(Se)),m()]),p=()=>i.or([i.orbitPrefix("CORNER"),i.orbitPrefix("C4RNER"),i.orbitPrefix("C5RNER")]),x=()=>i.or([l(),i.and([o(),m()])]),N=()=>i.and([o(),d()]),De=()=>i.and([i.and(i.moves(["F","R"])),m()]),ce=()=>i.and([i.and(i.moves(["F","R"])),p(),i.not(o())]),V=()=>i.or([ce(),De()]);function g(){r.set(c(),"Dim")}function Xt(){r.set(o(),"PermuteNonPrimary"),r.set(N(),"Dim")}function H(){r.set(o(),"IgnoreNonPrimary"),r.set(N(),"Regular")}function We(){r.set(o(),"Ignoriented"),r.set(N(),"Dim")}switch(t){case"full":break;case"PLL":{g(),Xt();break}case"CLS":{g(),r.set(ce(),"Regular"),r.set(o(),"Ignoriented"),r.set(i.and([o(),d()]),"Dim"),r.set(i.and([o(),p()]),"IgnoreNonPrimary");break}case"OLL":{g(),H();break}case"EOLL":{g(),H(),r.set(i.and([o(),p()]),"Ignored");break}case"COLL":{g(),r.set(i.and([o(),m()]),"Ignoriented"),r.set(i.and([o(),d()]),"Dim"),r.set(i.and([o(),p()]),"Regular");break}case"OCLL":{g(),We(),r.set(i.and([o(),p()]),"IgnoreNonPrimary");break}case"CPLL":{g(),r.set(i.and([p(),o()]),"PermuteNonPrimary"),r.set(i.and([i.not(p()),o()]),"Dim");break}case"CLL":{g(),r.set(i.not(i.and([p(),o()])),"Dim");break}case"EPLL":{g(),r.set(o(),"Dim"),r.set(i.and([o(),m()]),"PermuteNonPrimary");break}case"ELL":{g(),r.set(o(),"Dim"),r.set(i.and([o(),m()]),"Regular");break}case"ELS":{g(),H(),r.set(i.and([o(),p()]),"Ignored"),r.set(De(),"Regular"),r.set(ce(),"Ignored");break}case"LL":{g();break}case"F2L":{r.set(o(),"Ignored");break}case"ZBLL":{g(),r.set(o(),"PermuteNonPrimary"),r.set(N(),"Dim"),r.set(i.and([o(),p()]),"Regular");break}case"ZBLS":{g(),r.set(V(),"Regular"),H(),r.set(i.and([o(),p()]),"Ignored");break}case"VLS":{g(),r.set(V(),"Regular"),H();break}case"WVLS":{g(),r.set(V(),"Regular"),r.set(i.and([o(),m()]),"Ignoriented"),r.set(i.and([o(),d()]),"Dim"),r.set(i.and([o(),p()]),"IgnoreNonPrimary");break}case"LS":{g(),r.set(V(),"Regular"),r.set(o(),"Ignored"),r.set(N(),"Dim");break}case"LSOLL":{g(),H(),r.set(V(),"Regular");break}case"LSOCLL":{g(),We(),r.set(i.and([o(),p()]),"IgnoreNonPrimary"),r.set(V(),"Regular");break}case"EO":{r.set(p(),"Ignored"),r.set(m(),"OrientationWithoutPermutation");break}case"EOline":{r.set(p(),"Ignored"),r.set(m(),"OrientationWithoutPermutation"),r.set(i.and(i.moves(["D","M"])),"Regular");break}case"EOcross":{r.set(m(),"OrientationWithoutPermutation"),r.set(i.move("D"),"Regular"),r.set(p(),"Ignored");break}case"CMLL":{r.set(c(),"Dim"),r.set(x(),"Ignored"),r.set(i.and([o(),p()]),"Regular");break}case"L10P":{r.set(i.not(x()),"Dim"),r.set(i.and([p(),o()]),"Regular");break}case"L6E":{r.set(i.not(x()),"Dim");break}case"L6EO":{r.set(i.not(x()),"Dim"),r.set(x(),"ExperimentalOrientationWithoutPermutation2"),r.set(i.and([d(),s()]),"ExperimentalOrientationWithoutPermutation2"),r.set(i.and([i.move("M"),i.move("E")]),"Ignored");break}case"Daisy":{r.set(i.all(),"Ignored"),r.set(d(),"Dim"),r.set(i.and([i.move("D"),d()]),"Regular"),r.set(i.and([i.move("U"),m()]),"IgnoreNonPrimary");break}case"Cross":{r.set(i.all(),"Ignored"),r.set(d(),"Dim"),r.set(i.and([i.move("D"),d()]),"Regular"),r.set(i.and([i.move("D"),m()]),"Regular");break}case"2x2x2":{r.set(i.or(i.moves(["U","F","R"])),"Ignored"),r.set(i.and([i.or(i.moves(["U","F","R"])),d()]),"Dim");break}case"2x2x3":{r.set(i.all(),"Dim"),r.set(i.or(i.moves(["U","F","R"])),"Ignored"),r.set(i.and([i.or(i.moves(["U","F","R"])),d()]),"Dim"),r.set(i.and([i.move("F"),i.not(i.or(i.moves(["U","R"])))]),"Regular");break}case"G1":{r.set(i.all(),"ExperimentalOrientationWithoutPermutation2"),r.set(i.or(i.moves(["E"])),"OrientationWithoutPermutation"),r.set(i.and(i.moves(["E","S"])),"Ignored");break}case"L2C":{r.set(i.or(i.moves(["L","R","B","D"])),"Dim"),r.set(i.not(d()),"Ignored");break}case"PBL":{r.set(i.all(),"Ignored"),r.set(i.or(i.moves(["U","D"])),"PermuteNonPrimary");break}case"FirstBlock":{r.set(i.not(i.and([i.and(i.moves(["L"])),i.not(o())])),"Ignored"),r.set(h("R"),"Dim");break}case"SecondBlock":{r.set(i.not(i.and([i.and(i.moves(["L"])),i.not(o())])),"Ignored"),r.set(i.and([i.and(i.moves(["L"])),i.not(o())]),"Dim"),r.set(i.and([i.and(i.moves(["R"])),i.not(o())]),"Regular");break}case"EODF":{g(),r.set(i.or([ce(),i.and([o(),p()])]),"Ignored"),r.set(i.or([i.and([o(),m()]),De()]),"OrientationWithoutPermutation"),r.set(v(["D","F"]),"Regular"),r.set(h("F"),"Regular");break}case"Void Cube":{r.set(d(),"Invisible");break}case"picture":case"invisible":{r.set(i.all(),"Invisible");break}case"centers-only":{r.set(i.not(d()),"Ignored");break}case"opposite-centers":{r.set(i.not(i.and([d(),i.or(i.moves(["U","D"]))])),"Ignored");break}case"OBL":{r.set(i.or(i.moves(["U","D"])),"IgnoreNonPrimary");break}default:console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),r.set(i.and(i.moves([])),"Dim")}return r}async function ve(e,t){const n=[],r=[];for(const[i,o]of Object.entries(Un))o.groups&&(e in o.groups?n.push(i):t?.use3x3x3Fallbacks&&"3x3x3"in o.groups&&r.push(i));return n.concat(r)}function S(e){let t=null;return()=>t??=e()}async function Ke(e){return(await import("./index-E-xZSSfo.js")).getPuzzleGeometryByName(e,{allMoves:!0,orientCenters:!0,addRotations:!0})}async function In(e){return(await import("./index-E-xZSSfo.js")).getPuzzleGeometryByName(e)}async function On(e,t,n){const r=await e,i=r.getKPuzzleDefinition(!0);i.name=t;const o=await import("./index-E-xZSSfo.js"),s=new o.ExperimentalPGNotation(r,r.getOrbitsDef(!0));if(n){const u=new Set(n);for(const[l,c]of Object.entries(i.defaultPattern))u.has(l)&&(c.orientationMod=new Array(c.pieces.length).fill(1))}return new ge(s.remapKPuzzleDefinition(i),{experimentalPGNotation:s})}var P=class{pgId;id;fullName;inventedBy;inventionYear;#e;constructor(e){this.pgId=e.pgID,this.id=e.id,this.fullName=e.fullName,this.inventedBy=e.inventedBy,this.inventionYear=e.inventionYear,this.#e=e.setOrientationModTo1ForPiecesOfOrbits}#t;pg(){return this.#t??=Ke(this.pgId??this.id)}#n;basePG(){return this.#n??=In(this.pgId??this.id)}#r;kpuzzle(){return this.#r??=On(this.pg(),this.id,this.#e)}#i;svg(){return this.#i??=(async()=>(await this.pg()).generatesvg())()}puzzleSpecificSimplifyOptionsPromise=Mn(this.kpuzzle.bind(this))},ae=class extends P{stickeringMask(e){return se(this,e)}stickerings=()=>ve(this.id,{use3x3x3Fallbacks:!0});algTransformData=Ge};function Mn(e){return new yt(async t=>{const n=await e();t({quantumMoveOrder:r=>n.moveToTransformation(new a(r)).repetitionOrder()})})}var Rt={name:"3x3x3",orbits:[{orbitName:"EDGES",numPieces:12,numOrientations:2},{orbitName:"CORNERS",numPieces:8,numOrientations:3},{orbitName:"CENTERS",numPieces:6,numOrientations:4}],defaultPattern:{EDGES:{pieces:[0,1,2,3,4,5,6,7,8,9,10,11],orientation:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{pieces:[0,1,2,3,4,5,6,7],orientation:[0,0,0,0,0,0,0,0]},CENTERS:{pieces:[0,1,2,3,4,5],orientation:[0,0,0,0,0,0],orientationMod:[1,1,1,1,1,1]}},moves:{U:{EDGES:{permutation:[1,2,3,0,4,5,6,7,8,9,10,11],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[1,0,0,0,0,0]}},y:{EDGES:{permutation:[1,2,3,0,5,6,7,4,10,8,11,9],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,7,4,5,6],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientationDelta:[1,0,0,0,0,3]}},x:{EDGES:{permutation:[4,8,0,9,6,10,2,11,5,7,1,3],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,3,5,7,6,2,1],orientationDelta:[2,1,2,1,1,2,1,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientationDelta:[0,3,0,1,2,2]}},L:{EDGES:{permutation:[0,1,2,11,4,5,6,9,8,3,10,7],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientationDelta:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,1,0,0,0,0]}},F:{EDGES:{permutation:[9,1,2,3,8,5,6,7,0,4,10,11],orientationDelta:[1,0,0,0,1,0,0,0,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientationDelta:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,1,0,0,0]}},R:{EDGES:{permutation:[0,8,2,3,4,10,6,7,5,9,1,11],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientationDelta:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,0,1,0,0]}},B:{EDGES:{permutation:[0,1,10,3,4,5,11,7,8,9,6,2],orientationDelta:[0,0,1,0,0,0,1,0,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientationDelta:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,0,0,1,0]}},D:{EDGES:{permutation:[0,1,2,3,7,4,5,6,8,9,10,11],orientationDelta:[0,0,0,0,0,0,0,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,1,2,3,4,5],orientationDelta:[0,0,0,0,0,1]}},z:{EDGES:{permutation:[9,3,11,7,8,1,10,5,0,4,2,6],orientationDelta:[1,1,1,1,1,1,1,1,1,1,1,1]},CORNERS:{permutation:[3,2,6,5,0,4,7,1],orientationDelta:[1,2,1,2,2,1,2,1]},CENTERS:{permutation:[1,5,2,0,4,3],orientationDelta:[1,1,1,1,3,1]}},M:{EDGES:{permutation:[2,1,6,3,0,5,4,7,8,9,10,11],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientationDelta:[2,0,0,0,2,0]}},E:{EDGES:{permutation:[0,1,2,3,4,5,6,7,9,11,8,10],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientationDelta:[0,0,0,0,0,0]}},S:{EDGES:{permutation:[0,3,2,7,4,1,6,5,8,9,10,11],orientationDelta:[0,1,0,1,0,1,0,1,0,0,0,0]},CORNERS:{permutation:[0,1,2,3,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientationDelta:[1,1,0,1,0,1]}},u:{EDGES:{permutation:[1,2,3,0,4,5,6,7,10,8,11,9],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[1,2,3,0,4,5,6,7],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,2,3,4,1,5],orientationDelta:[1,0,0,0,0,0]}},l:{EDGES:{permutation:[2,1,6,11,0,5,4,9,8,3,10,7],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[0,1,6,2,4,3,5,7],orientationDelta:[0,0,2,1,0,2,1,0]},CENTERS:{permutation:[4,1,0,3,5,2],orientationDelta:[2,1,0,0,2,0]}},f:{EDGES:{permutation:[9,3,2,7,8,1,6,5,0,4,10,11],orientationDelta:[1,1,0,1,1,1,0,1,1,1,0,0]},CORNERS:{permutation:[3,1,2,5,0,4,6,7],orientationDelta:[1,0,0,2,2,1,0,0]},CENTERS:{permutation:[1,5,2,0,4,3],orientationDelta:[1,1,1,1,0,1]}},r:{EDGES:{permutation:[4,8,0,3,6,10,2,7,5,9,1,11],orientationDelta:[1,0,1,0,1,0,1,0,0,0,0,0]},CORNERS:{permutation:[4,0,2,3,7,5,6,1],orientationDelta:[2,1,0,0,1,0,0,2]},CENTERS:{permutation:[2,1,5,3,0,4],orientationDelta:[0,0,0,1,2,2]}},b:{EDGES:{permutation:[0,5,10,1,4,7,11,3,8,9,6,2],orientationDelta:[0,1,1,1,0,1,1,1,0,0,1,1]},CORNERS:{permutation:[0,7,1,3,4,5,2,6],orientationDelta:[0,2,1,0,0,0,2,1]},CENTERS:{permutation:[3,0,2,5,4,1],orientationDelta:[3,3,0,3,1,3]}},d:{EDGES:{permutation:[0,1,2,3,7,4,5,6,9,11,8,10],orientationDelta:[0,0,0,0,0,0,0,0,1,1,1,1]},CORNERS:{permutation:[0,1,2,3,5,6,7,4],orientationDelta:[0,0,0,0,0,0,0,0]},CENTERS:{permutation:[0,4,1,2,3,5],orientationDelta:[0,0,0,0,0,1]}}},derivedMoves:{Uw:"u",Lw:"l",Fw:"f",Rw:"r",Bw:"b",Dw:"d",Uv:"y",Lv:"x'",Fv:"z",Rv:"x",Bv:"z'",Dv:"y'","2U":"u U'","2L":"l L'","2F":"f F'","2R":"r R'","2B":"b B'","2D":"d D'"}};function Lt(e){const t=e.patternData.CENTERS.pieces[0],n=e.patternData.CENTERS.pieces[5],r=e.patternData.CENTERS.pieces[1];let i=r;return t<r&&i--,n<r&&i--,[t,i]}var Ye=new Array(6).fill(0).map(()=>new Array(6));function Kn(){{const e=["","z","x","z'","x'","x2"].map(n=>f.fromString(n)),t=new f("y");for(const n of e){let r=bt.algToTransformation(n);for(let i=0;i<4;i++){r=r.applyAlg(t);const[o,s]=Lt(r.toKPattern());Ye[o][s]=r.invert()}}}return Ye}function Gn(e){const[t,n]=Lt(e),r=Kn()[t][n];return e.applyTransformation(r)}function _n(e,t){return t.ignorePuzzleOrientation&&(e=Gn(e)),t.ignoreCenterOrientation&&(e=new b(e.kpuzzle,{EDGES:e.patternData.EDGES,CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})),!!e.experimentalToTransformation()?.isIdentityTransformation()}var qn=class extends we{traverseAlg(e,t){const n=[];for(const r of e.childAlgNodes())n.push(this.traverseAlgNode(r,t));return new f(n)}traverseGrouping(e,t){return e.modified({alg:this.traverseAlg(e.alg,t)})}traverseMove(e,t){const n=(()=>{const{invertExceptByFamily:r}=t;return r?!r.has(e.family):!1})();return e.modified({amount:n?-e.amount:e.amount,family:t.replaceMovesByFamily[e.family]??e.family})}traverseCommutator(e,t){return new L(this.traverseAlg(e.A,t),this.traverseAlg(e.B,t))}traverseConjugate(e,t){return new F(this.traverseAlg(e.A,t),this.traverseAlg(e.B,t))}traversePause(e,t){return e}traverseNewline(e,t){return e}traverseLineComment(e,t){return e}};I(qn);function Ft(e){const n=e.experimentalToTransformation().invert().transformationData.CORNERS;return n.permutation[6]*3+n.orientationDelta[6]}var Je=new Array(24);function Wn(e){{const t=["","z","x","z'","x'","x2"].map(r=>f.fromString(r)),n=new f("y");for(const r of t){let i=e.algToTransformation(r);for(let o=0;o<4;o++){i=i.applyAlg(n);const s=Ft(i.toKPattern());Je[s]={transformation:i.invert(),alg:r.concat(n)}}}}return Je}function $n(e){const t=Ft(e),{transformation:n,alg:r}=Wn(e.kpuzzle)[t];return{normalizedPattern:e.applyTransformation(n),normalizationAlg:r.invert()}}function Qn(e,t){return t.ignorePuzzleOrientation&&(e=$n(e).normalizedPattern),!!e.experimentalToTransformation().isIdentityTransformation()}var bt=new ge(Rt);Rt.experimentalIsPatternSolved=_n;var Et=S(()=>import("./big-puzzle-orientation-3GQ3L26S-Cp1ooNPA.js")),Bt={KeyI:new a("R"),KeyK:new a("R'"),KeyW:new a("B"),KeyO:new a("B'"),KeyS:new a("D"),KeyL:new a("D'"),KeyD:new a("L"),KeyE:new a("L'"),KeyJ:new a("U"),KeyF:new a("U'"),KeyH:new a("F"),KeyG:new a("F'"),KeyC:new a("l"),KeyR:new a("l'"),KeyU:new a("r"),KeyM:new a("r'"),KeyX:new a("d"),Comma:new a("d'"),KeyT:new a("x"),KeyY:new a("x"),KeyV:new a("x'"),KeyN:new a("x'"),Semicolon:new a("y"),KeyA:new a("y'"),KeyP:new a("z"),KeyQ:new a("z'"),KeyZ:new a("M'"),KeyB:new a("M"),Period:new a("M'"),Backquote:new E};function D(e,t,n,r){const i=[];for(const o of e){const s=a.fromString(o),{family:u,amount:l}=s;if(![-1,1].includes(l))throw new Error("Invalid config move");i.push({family:u,direction:l,type:t,from:n,to:r})}return i}var Q={"x axis":{sliceDiameter:3,extendsThroughEntirePuzzle:!0,moveSourceInfos:[...D(["R"],0,0,3),...D(["L'"],1,0,3),...D(["r","Rw"],2,0,2),...D(["l'","Lw'"],3,0,2),...D(["M'"],4,1,2),...D(["x","Uv","Dv'"],5,0,3)]},"y axis":{sliceDiameter:3,extendsThroughEntirePuzzle:!0,moveSourceInfos:[...D(["U"],0,0,3),...D(["D'"],1,0,3),...D(["u","Uw"],2,0,2),...D(["d'","Dw'"],3,0,2),...D(["E'"],4,1,2),...D(["y","Uv","Dv'"],5,0,3)]},"z axis":{sliceDiameter:3,extendsThroughEntirePuzzle:!0,moveSourceInfos:[...D(["F"],0,0,3),...D(["B'"],1,0,3),...D(["f","Fw"],2,0,3),...D(["b'","Bw'"],3,0,3),...D(["S"],4,1,2),...D(["z","Fv","Bv'"],5,0,3)]}},ue={};for(const[e,t]of Object.entries(Q))for(const n of t.moveSourceInfos)ue[n.family]={axis:e,moveSourceInfo:n};var zt={};for(const e of Object.keys(Q)){const t={};zt[e]=t;for(const n of Q[e].moveSourceInfos)(t[n.type]??=[]).push(n)}var Nt={};for(const e of Object.keys(Q)){const t=new Map;Nt[e]=t;for(const n of Q[e].moveSourceInfos)t.get(n.from)||t.set(n.from,n)}function et(e,t){const n=zt[e][t]?.[0];if(!n)throw new Error(`Could not find a reference move (axis: ${e}, move source type: ${t})`);return n}var Vn=(e,t)=>ue[e.family].axis===ue[t.family].axis;function Hn(e,t,n,r){if(t+1===n){const m=Nt[e].get(t);if(m)return new a(new C(m.family),r*m.direction)}const i=Q[e],{sliceDiameter:o}=i;if(t===0&&n===o){const m=et(e,5);return new a(new C(m.family),r*m.direction)}const s=t+n>o;s&&([t,n]=[o-n,o-t]);let u=t+1,l=n;const c=u===l;c&&(l=null),u===1&&(u=null),c&&u===1&&(l=null),!c&&l===2&&(l=null);const h=et(e,c?s?1:0:s?3:2);return new a(new C(h.family,l,u),r*h.direction)}function jn(e,t=!0){if(e.length===0)return[];const n=ue[e[0].family].axis,r=Q[n],{sliceDiameter:i}=r,o=new Map;let s=null;function u(m,v){let p=(o.get(m)??0)+v;t&&(p=p%4+5%4-1),p===0?o.delete(m):o.set(m,p)}let l=0;for(const m of Array.from(e).reverse()){l++;const{moveSourceInfo:v}=ue[m.family],p=m.amount*v.direction;switch(v.type){case 0:{const x=(m.innerLayer??1)-1;u(x,p),u(x+1,-p);break}case 1:{const x=i-(m.innerLayer??1);u(x,p),u(x+1,-p);break}case 2:{u((m.outerLayer??1)-1,p),u(m.innerLayer??2,-p);break}case 3:{u(i-(m.innerLayer??2),p),u(i-((m.outerLayer??1)-1),-p);break}case 4:{u(v.from,p),u(v.to,-p);break}case 5:{u(0,p),u(i,-p);break}}[0,2].includes(o.size)&&(s={suffixLength:l,sliceDeltas:new Map(o)})}if(o.size===0)return[];if(!s)return e;let[c,d]=s.sliceDeltas.keys();c>d&&([c,d]=[d,c]);const h=s.sliceDeltas.get(c);return[...e.slice(0,-s.suffixLength),...h!==0?[Hn(n,c,d,h)]:[]]}var Zn={quantumMoveOrder:()=>4,axis:{areQuantumMovesSameAxis:Vn,simplifySameAxisMoves:jn}},Ge={" Mirror (M)":{replaceMovesByFamily:{L:"R",R:"L",l:"r",r:"l",Lw:"Rw",Rw:"Lw",Lv:"Rv",Rv:"Lv"},invertExceptByFamily:new Set(["x","M","m"])}," Mirror (S)":{replaceMovesByFamily:{F:"B",B:"F",f:"b",b:"f",Fw:"Bw",Bw:"Fw",Fv:"Bv",Bv:"Fv"},invertExceptByFamily:new Set(["z","S","s"])}," Mirror (E)":{replaceMovesByFamily:{U:"D",D:"U",u:"d",d:"u",Uw:"Dw",Dw:"Uw",Uv:"Dv",Dv:"Uv"},invertExceptByFamily:new Set(["y","E","e"])}},At={id:"3x3x3",fullName:"333 Cube",inventedBy:["Ern Rubik"],inventionYear:1974,kpuzzle:S(async()=>bt),svg:S(async()=>(await import("./puzzles-dynamic-3x3x3-JWIWLLZA-fR7zXD4k.js")).cube3x3x3SVG),llSVG:S(async()=>(await import("./puzzles-dynamic-3x3x3-JWIWLLZA-fR7zXD4k.js")).cube3x3x3LLSVG),llFaceSVG:S(async()=>(await import("./puzzles-dynamic-3x3x3-JWIWLLZA-fR7zXD4k.js")).cube3x3x3LLFaceSVG),pg:S(async()=>Ke("3x3x3")),stickeringMask:e=>se(At,e),stickerings:()=>ve("3x3x3"),puzzleSpecificSimplifyOptions:Zn,keyMapping:async()=>Bt,algTransformData:Ge},Xn=class extends Me{traverseAlg(e){let t=0;for(const n of e.childAlgNodes())t+=this.traverseAlgNode(n);return t}traverseGrouping(e){return this.traverseAlg(e.alg)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 0}traverseLineComment(e){return 0}};I(Xn);var xe=class extends Me{constructor(e){super(),this.metric=e}traverseAlg(e){let t=0;for(const n of e.childAlgNodes())t+=this.traverseAlgNode(n);return t}traverseGrouping(e){const t=e.alg;return this.traverseAlg(t)*Math.abs(e.amount)}traverseMove(e){return this.metric(e)}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 0}traverseNewline(e){return 0}traverseLineComment(e){return 0}},Yn=class extends Me{traverseAlg(e){let t=0;for(const n of e.childAlgNodes())t+=this.traverseAlgNode(n);return t}traverseGrouping(e){const t=e.alg;return this.traverseAlg(t)*Math.abs(e.amount)}traverseMove(e){return 1}traverseCommutator(e){return 2*(this.traverseAlg(e.A)+this.traverseAlg(e.B))}traverseConjugate(e){return 2*this.traverseAlg(e.A)+this.traverseAlg(e.B)}traversePause(e){return 1}traverseNewline(e){return 1}traverseLineComment(e){return 1}};function Pt(e){return"A"<=e&&e<="Z"}function Jn(e){const t=e.family;return Pt(t[0])&&t[t.length-1]==="v"||t==="x"||t==="y"||t==="z"||t==="T"?0:1}function er(e){return 1}function Tt(e){const t=e.family;return Pt(t[0])&&t[t.length-1]==="v"||t==="x"||t==="y"||t==="z"||t==="T"?0:1}function tr(e){return Math.abs(e.amount)*Tt(e)}var nr=I(xe,[Jn]);I(xe,[er]);I(xe,[tr]);I(xe,[Tt]);I(Yn,[]);var _e={id:"2x2x2",fullName:"222 Cube",kpuzzle:S(async()=>{const e=new ge((await import("./puzzles-dynamic-side-events-IMYJ533P-DK91LDw7.js")).cube2x2x2JSON);return e.definition.experimentalIsPatternSolved=Qn,e}),svg:async()=>(await import("./puzzles-dynamic-side-events-IMYJ533P-DK91LDw7.js")).cube2x2x2SVG,llSVG:S(async()=>(await import("./puzzles-dynamic-side-events-IMYJ533P-DK91LDw7.js")).cube2x2x2LLSVG),pg:S(async()=>Ke("2x2x2")),stickeringMask:e=>se(_e,e),stickerings:()=>ve("2x2x2",{use3x3x3Fallbacks:!0}),algTransformData:Ge},kt={...Bt,KeyZ:new a("m'"),KeyB:new a("m"),Period:new a("m'")},he=new ae({id:"4x4x4",fullName:"444 Cube",inventedBy:["Peter Sebestny"],inventionYear:1981});he.llSVG=S(async()=>(await import("./puzzles-dynamic-4x4x4-REUXFQJ4-BNnOy5ao.js")).cube4x4x4LLSVG);he.keyMapping=async()=>kt;he.kpuzzle=S(async()=>{const e=await P.prototype.kpuzzle.call(he);e.definition.defaultPattern.CENTERS.pieces=[0,0,0,0,4,4,4,4,8,8,8,8,12,12,12,12,16,16,16,16,20,20,20,20];const{experimentalIsBigCubeSolved:t}=await Et();return e.definition.experimentalIsPatternSolved=t,e});var Ce=new ae({id:"5x5x5",fullName:"555 Cube",inventedBy:["Udo Krell"],inventionYear:1981});Ce.keyMapping=async()=>kt;Ce.kpuzzle=S(async()=>{const e=await P.prototype.kpuzzle.call(Ce),t=[0,0,0,0,4,4,4,4,8,8,8,8,12,12,12,12,16,16,16,16,20,20,20,20];e.definition.defaultPattern.CENTERS.pieces=t,e.definition.defaultPattern.CENTERS2.pieces=t,e.definition.defaultPattern.CENTERS3.orientationMod=new Array(6).fill(1);const{experimentalIsBigCubeSolved:n}=await Et();return e.definition.experimentalIsPatternSolved=n,e});async function Ut(e,t){const n=await e.kpuzzle(),r=new Dt(n),i=new St(n),o=()=>i.and([i.move("U"),i.not(i.or(i.moves(["F","BL","BR"])))]),s=()=>i.and([i.move("U"),i.not(i.move("F"))]),u=()=>i.or([s(),i.and([i.move("F"),i.not(i.or(i.moves(["U","BL","BR"])))])]),l=()=>i.not(i.or([i.and([i.move("U"),i.move("F")]),i.and([i.move("F"),i.move("BL")]),i.and([i.move("F"),i.move("BR")]),i.and([i.move("BL"),i.move("BR")])])),c=()=>i.not(i.or([i.and([i.move("F"),i.move("BL")]),i.and([i.move("F"),i.move("BR")]),i.and([i.move("BL"),i.move("BR")])]));switch(t){case"full":break;case"experimental-fto-fc":{r.set(i.not(o()),"Ignored");break}case"experimental-fto-f2t":{r.set(i.not(s()),"Ignored"),r.set(o(),"Dim");break}case"experimental-fto-sc":{r.set(i.not(u()),"Ignored"),r.set(s(),"Dim");break}case"experimental-fto-l2c":{r.set(i.not(l()),"Ignored"),r.set(u(),"Dim");break}case"experimental-fto-lbt":{r.set(i.not(c()),"Ignored"),r.set(l(),"Dim");break}case"experimental-fto-l3t":{r.set(c(),"Dim");break}default:console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),r.set(i.and(i.moves([])),"Dim")}return r.toStickeringMask()}async function rr(){return["full","experimental-fto-fc","experimental-fto-f2t","experimental-fto-sc","experimental-fto-l2c","experimental-fto-lbt","experimental-fto-l3t"]}var Ct={KeyI:new a("R"),KeyK:new a("R'"),KeyW:new a("B"),KeyO:new a("B'"),KeyS:new a("D"),KeyL:new a("D'"),KeyD:new a("L"),KeyE:new a("L'"),KeyJ:new a("U"),KeyF:new a("U'"),KeyH:new a("F"),KeyG:new a("F'"),KeyN:new a("Rv'"),KeyC:new a("l"),KeyR:new a("l'"),KeyU:new a("r"),KeyM:new a("r'"),KeyX:new a("d"),Comma:new a("d'"),KeyT:new a("Lv'"),KeyY:new a("Rv"),KeyV:new a("Lv"),Semicolon:new a("Uv"),KeyA:new a("Uv'"),KeyP:new a("BR'"),KeyQ:new a("BL"),KeyZ:new a("BL'"),KeyB:new a("T"),Period:new a("BR"),Backquote:new E},ir=class extends P{constructor(){super({pgID:"skewb diamond",id:"baby_fto",fullName:"Baby FTO",inventedBy:["Uwe Mffert"],setOrientationModTo1ForPiecesOfOrbits:["CENTERS"]})}stickeringMask(e){return Ut(this,e)}svg=S(async()=>(await import("./puzzles-dynamic-unofficial-P3TW433I-Qmz-kdAk.js")).babyFTOSVG);keyMapping=async()=>Ct};new ir;var ar=class extends P{constructor(){super({pgID:"FTO",id:"fto",fullName:"Face-Turning Octahedron",inventedBy:["Karl Rohrbach","David Pitcher"],inventionYear:1983})}stickeringMask(e){return Ut(this,e)}stickerings=rr;svg=S(async()=>(await import("./puzzles-dynamic-unofficial-P3TW433I-Qmz-kdAk.js")).ftoSVG);keyMapping=async()=>Ct;algTransformData={" Mirror (x)":{replaceMovesByFamily:{L:"R",R:"L",l:"r",r:"l",Lw:"Rw",Rw:"Lw",Lv:"Rv",Rv:"Lv",BL:"BR",BR:"BL",bl:"br",br:"bl",BLw:"BRw",BRw:"BLw",BLv:"BRv",BRv:"BLv"},invertExceptByFamily:new Set(["x"])}}},or=new ar;async function sr(e,t){return(await It()).includes(t)?se(e,t):(console.warn(`Unsupported stickering for ${e.id}: ${t}. Setting all pieces to dim.`),se(e,"full"))}var ur=T(()=>ve("megaminx"));function It(){return ur}var lr={KeyI:new a("R"),KeyK:new a("R'"),KeyW:new a("B"),KeyO:new a("B'"),KeyS:new a("FR"),KeyL:new a("FR'"),KeyD:new a("L"),KeyE:new a("L'"),KeyJ:new a("U"),KeyF:new a("U'"),KeyH:new a("F"),KeyG:new a("F'"),KeyC:new a("Lw"),KeyR:new a("Lw'"),KeyU:new a("Rw"),KeyM:new a("Rw'"),KeyX:new a("d"),Comma:new a("d'"),KeyT:new a("Rv"),KeyY:new a("Rv"),KeyV:new a("Rv'"),KeyN:new a("Rv'"),Semicolon:new a("y"),KeyA:new a("y'"),KeyP:new a("z"),KeyQ:new a("z'"),KeyZ:new a("2L'"),KeyB:new a("2R"),Period:new a("2R'"),Backquote:new E},cr=class extends P{constructor(){super({id:"megaminx",fullName:"Megaminx",inventionYear:1981})}stickeringMask(e){return sr(this,e)}stickerings=It;llSVG=S(async()=>(await import("./puzzles-dynamic-megaminx-2LVHIDL4-Cm8jQJ-N.js")).megaminxLLSVG);keyMapping=async()=>lr},mr=new cr,fr=class extends P{constructor(){super({id:"pyraminx",fullName:"Pyraminx",inventedBy:["Uwe Meffert"]})}svg=S(async()=>(await import("./puzzles-dynamic-side-events-IMYJ533P-DK91LDw7.js")).pyraminxSVG);algTransformData={" Mirror (x)":{replaceMovesByFamily:{L:"R",R:"L",l:"r",r:"l",Lw:"Rw",Rw:"Lw",Lv:"Rv",Rv:"Lv"},invertExceptByFamily:new Set([])}}},pr=new fr,M={"3x3x3":At,"2x2x2":_e,"6x6x6":new ae({id:"6x6x6",fullName:"666 Cube"}),"7x7x7":new ae({id:"7x7x7",fullName:"777 Cube"}),"40x40x40":new ae({id:"40x40x40",fullName:"404040 Cube"}),megaminx:mr,pyraminx:pr,skewb:new P({id:"skewb",fullName:"Skewb",inventedBy:["Tony Durham"]}),fto:or,gigaminx:new P({id:"gigaminx",fullName:"Gigaminx",inventedBy:["Tyler Fox"],inventionYear:2006}),master_tetraminx:new P({pgID:"master tetraminx",id:"master_tetraminx",fullName:"Master Tetraminx",inventedBy:["Katsuhiko Okamoto"],inventionYear:2002})},Ot=2**53,dr=2097152,hr=11,Le=new Uint32Array(2);function wr(){globalThis.crypto.getRandomValues(Le);const e=Le[0],t=Le[1];return Math.floor(e*dr)+(t>>hr)}function gr(e){if(typeof e!="number"||e<0||Math.floor(e)!==e)throw new Error("randomUIntBelow() not called with a positive integer value.");if(e>Ot)throw new Error(`Called randomUIntBelow() with max === ${e}, which is larger than JavaScript can handle with integer precision.`)}function vr(e){gr(e);for(var t,n,r;;)if(t=wr(),n=Math.floor(t/e),r=n*e,r<=Ot-e)return t-r}function Mt(e){return e[vr(e.length)]}var Kt=!1;function xr(e){Kt=e}function k(){if(!Kt)throw new Error("Must be called from inside a worker, to avoid impact on page performance. Try importing from the top level of `cubing/solve`?")}function Gt(e,t){const n=new Ie;n.experimentalPushAlg(e);for(const r of t){const i=Mt(r);i!==null&&n.push(a.fromString(i))}return n.toAlg()}var _t=T(()=>import("./search-dynamic-solve-3x3x3-B2L4IN34-uMfhr9Ka.js")),yr="UF UR UB UL DF DR DB DL FR FL BR BL".split(" "),Dr="UFR URB UBL ULF DRF DFL DLB DBR".split(" "),Sr="U L F R B D".split(" "),Rr=[[1,2,0],[0,2,0],[1,1,0],[0,3,0],[2,0,0],[0,1,0],[1,3,0],[0,0,0],[1,0,0],[1,0,2],[0,1,1],[1,1,1],[0,8,1],[2,3,0],[0,10,1],[1,4,1],[0,5,1],[1,7,2],[1,3,2],[0,0,1],[1,0,1],[0,9,0],[2,2,0],[0,8,0],[1,5,1],[0,4,1],[1,4,2],[1,5,0],[0,4,0],[1,4,0],[0,7,0],[2,5,0],[0,5,0],[1,6,0],[0,6,0],[1,7,0],[1,2,2],[0,3,1],[1,3,1],[0,11,1],[2,1,0],[0,9,1],[1,6,1],[0,7,1],[1,5,2],[1,1,2],[0,2,1],[1,2,1],[0,10,0],[2,4,0],[0,11,0],[1,7,1],[0,6,1],[1,6,2]];function tt(e,t){return e.slice(t)+e.slice(0,t)}function Lr(e){const t=[[],[]];for(let n=0;n<6;n++)if(e.patternData.CENTERS.pieces[n]!==n)throw new Error("non-oriented puzzles are not supported");for(let n=0;n<12;n++)t[0].push(tt(yr[e.patternData.EDGES.pieces[n]],e.patternData.EDGES.orientation[n]));for(let n=0;n<8;n++)t[1].push(tt(Dr[e.patternData.CORNERS.pieces[n]],e.patternData.CORNERS.orientation[n]));return t.push(Sr),t}function Fr(e){const t=Lr(e);return Rr.map(([n,r,i])=>t[n][r][i]).join("")}function nt(e,t){const n=new b(e.kpuzzle,{EDGES:e.patternData.EDGES,CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}}).experimentalToTransformation(),r=new b(t.kpuzzle,{EDGES:t.patternData.EDGES,CORNERS:t.patternData.CORNERS,CENTERS:{pieces:t.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}}).experimentalToTransformation();return n.isIdentical(r)}function br(e,t){if(nt(e.defaultPattern(),t))return!1;for(const n of"ULFRBD")for(let r=1;r<4;r++){const i=e.moveToTransformation(new a(n,r)).toKPattern();if(nt(i,t))return!1}return!0}var Er=[["R U'","R2 B","D2 B2","D' L B'","R' U'","B","D B2","R' B","L' U","L2 B'","B2","D L B'","L U","B'","U'","R B","D' B2","L B'","U2","U L' B'","","U' L' B'","U","L' B'"],["F2 L2","F' L'","R' F L2","D' L2","F L2","F2 L'","R' F' L'","R2 F L2","R2 F2 L'","L2","F L'","D' L","D2 L2","R2 F' L'","D L","","L2 F L'","L F' L2","L F L'","F' L2","L'","D L2","D F L'","L"],["R B U2 B'","R2 B U' B'","F2 B U B'","F B2 L' B2","B2 L B2","B U' B'","R2 B U2 B'","R' B U' B'","B2 L' B2","F B U B'","B2 U' B2","B' L B","L F' B D' B'","B' U' B2 D B'","B U2 B'","R B U' B'","B2 L2 B2","D' B' L B","B U B'","F' B2 L' B2","","B2 L' B' U' B'"],["U F2 L2 U'","F' U L' U'","F2 U L' U'","U F L2 U'","U2 B2 U2","R' U' B U","D2 U L U'","D U2 B' U2","U L2 U'","F U L' U'","D U L U'","U2 B' U2","","U2 B' U' L' U'","U2 L' U2","U' B U","U L U'","D' U2 B' U2","U L' U'","U2 B U2"],["R' D' F2","F'","F2","D R F'","R D' F2","R2 F'","D' F2","R F'","F2 R' D' F2","F","D2 F2","D' R F'","R2 D' F2","R' F'","D F2","D2 R F'","","F R' D' F2"],["R' D2 F' D F","R F2 R2 F2","R2 F' D2 F","F' R2 D2 F","L D' L'","D F' D2 F","F2 R2 F2","R F' D2 F","F' R2 D' F","F' R' D2 F","F2 R' F2","L D L'","F' R D' F","F2 R F2","F' D2 F","","L D2 R D' L'","F' D2 F' R F2","D2 R2 F2 R2 F2","D F' D' F","F' D F"],["U F2 U'","R U F' U'","D R U F2 U'","U F U'","R2 U F2 U'","R' U F' U'","R U F2 U'","R2 U F' U'","","U L D L' F U'","F2 D' R D F2","D2 U F U'","R' U F2 U'","U F' U'","F2 D2 R D2 F2","D U F U'"],["R2","R' B' D B","D R'","F' R2 F","","R B' D B","R'","B' D B","D' R'","D2 F' R2 F","R","R2 B' D B","D2 R'","B' D' B"],["R2 D' R2","F' R' F R","R D' R2 D R'","D2 R2 D2 R2","R' D' F' R F","U F D F' U'","","R2 D2 B R' B' R'","R' F D' F2 R F","R2 D R2","F2 U F U' F","R' D F' R F","D R2 D2 R2","U F D' F' U'","D R' D2 F' R F","R2 D2 R2","U F D2 F' U'","R' D2 F' R F"],["B R B'","F D F' B R2 B'","D B R2 B'","D2 B R' B'","B R2 B'","D B R' B'","D' B R2 B'","B R' B'","","B R2 B' D B R' B'","D2 B R2 B'","D' B R' B'"],["","R' D R F D2 F'","R' D R","D F D' F'","R F' R' F","F D' F'","R' D' R","F D2 F'","R' D2 R","F D F'"],["","F2 D2 R F' R' D2 F' D2 F'","F2 D2 F' D' F D' F' D2 F'","F2 D F2 D F2 D2 F2","D2 F L D2 L' D2 F'","D F D2 L D2 L' F'","R' D B' D2 B D' R","R' D2 B' D2 B R","F D2 F' D F D F'","F D' L D2 L' D F'","B D' F D B' D' F'","F D2 L D2 L' F'","F D' L D L' D F'","F L D2 L' D2 F'","R' B' D2 B D2 R"],["D'","F L D L' D' F'","D2","L B D B' D' L'","D","B' L' D' L D B","","D F L D L' D' F'"],["F' D2 F D F' D F","F' D' R' D R F","F' R' D' R D F","B D R D' R' B'","","D B' D' L' D L B"],["D F D F' D F D2 F'","F' U2 B' R' B U2 F' L F' L' F'","","D2 L D L2 F L F2 D F"],["L B' L' F L B L' F'","F2 U F' D2 F U' F' D2 F'","D' F' D B D' F D B'","F L2 F R2 F' L2 F R2 F2","D B D' F' D B' D' F","R F L F' R' F L' F'","","D2 B L' U2 L B' D2 B L' U2 L B'","D2 F R' U2 R F' D2 F R' U2 R F'","R F L' F' R' F L F'","D F D' B' D F' D' B","L2 F2 L' B2 L F2 L' B2 L'"],["L B R' B' L' B R B'","R' B R F' R' B' R F","L D2 L U L' D2 L U' L2","","D2 B' D2 F D' L2 F L2 F' D2 B D' F'","D2 F' R' F R2 B' D2 B D2 R' F D2 F'","L B L' F L B' L' F'","F' D2 F' U' F D2 F' U F2","D' B' D F D' B D F'"],["","D2 F' L U2 L' F D2 F' L U2 L' F","D2 B' R U2 R' B D2 B' R U2 R' B"]];async function qt(){const e=await M["3x3x3"].kpuzzle();let t=e.defaultPattern();for(const n of Er)t=t.applyAlg(f.fromString(Mt(n)));return br(e,t)?t:qt()}async function Wt(e){return k(),f.fromString((await _t).solvePattern(Fr(e)))}async function $t(){return Wt(await qt())}async function Br(){(await _t).initialize()}var zr=[[null,"Rw","Rw2","Rw'","Fw","Fw'"],[null,"Dw","Dw2","Dw'"]];async function Nr(){return Gt(await $t(),zr)}var Ar=2;function Pr(e,t){const n=[];for(const r of t){const i=new a(r);if(i.amount!==1)throw new Error("SGS cannot handle def moves with an amount other than 1 yet.");let o=e.identityTransformation();for(let s=1;o=o.applyMove(i),!o.isIdentityTransformation();s++)n.push({move:i.modified({amount:s}),transformation:o})}return n}var ye=class{constructor(e,t,n){this.kpuzzle=e,this.sgs=t,this.searchMoves=Pr(this.kpuzzle,n??Object.keys(this.kpuzzle.definition.moves))}searchMoves;async solve(e,t=Ar,n){const r=e.experimentalToTransformation();if(!r)throw new Error("distinguishable pieces are not supported in tremble solver yt");let i=null,o=1e6;const s=(u,l,c)=>{if(l===0){const d=this.sgsPhaseSolve(u,o);if(!d)return;const h=c.concat(d).experimentalSimplify({cancel:{directional:"any-direction",puzzleSpecificModWrap:"canonical-centered"},puzzleSpecificSimplifyOptions:{quantumMoveOrder:n}}),m=nr(h);(i===null||m<o)&&(i=h,o=m);return}for(const d of this.searchMoves)s(u.applyTransformation(d.transformation),l-1,c.concat([d.move]))};for(let u=0;u<=t;u++)s(r,u,new f);if(i===null)throw new Error("SGS search failed.");return i}sgsPhaseSolve(e,t){const n=new Ie;let r=e;for(const i of this.sgs.ordering){const o=i.pieceOrdering;let s="";const u=r.invert();for(let c=0;c<o.length;c++){const d=o[c],h=d.orbitName,m=d.permutationIdx;s+=` ${u.transformationData[h].permutation[m]} ${u.transformationData[h].orientationDelta[m]}`}const l=i.lookup[s];if(!l)throw new Error("Missing algorithm in sgs or esgs?");if(n.experimentalPushAlg(l.alg),n.experimentalNumAlgNodes()>=t)return null;r=r.applyTransformation(l.transformation);for(let c=0;c<o.length;c++){const d=o[c],h=d.orbitName,m=d.permutationIdx;if(r.transformationData[h].permutation[m]!==m||r.transformationData[h].orientationDelta[m]!==0)throw new Error("bad SGS :-(")}}return n.toAlg()}},qe=T(async()=>import("./twips-UDB2NAAU-D6rhGcfz.js"));async function Qt(e,t,n){const{wasmTwips:r}=await qe;return r(e,t,n)}async function Tr(e){const{wasmRandomScrambleForEvent:t}=await qe;return t(e)}async function kr(e,t,n){const{wasmDeriveScrambleForEvent:r}=await qe;return r(e,t,n)}var K=T(()=>import("./search-dynamic-sgs-side-events-RIRYKEP5-DDLZw4dz.js")),rt=null;async function Ur(){return rt||(rt=(async()=>{const e=await(await K).cachedData222();return new ye(await M["2x2x2"].kpuzzle(),e,"URFLBD".split(""))})())}async function Cr(){await Ur()}async function Ir(e){return k(),Qt((await _e.kpuzzle()).definition,e,{generatorMoves:"UFLR".split("")})}var Vt=T(()=>import("./search-dynamic-solve-4x4x4-4UB4NMF3-D0JrXU3r.js")),Or=[[null,"x","x2","x'","z","z'"],[null,"y","y2","y'"]];async function Mr(){return(await Vt).initialize()}async function Ht(){return k(),(await Vt).random444Scramble()}async function Kr(){return Gt(await Ht(),Or)}var Gr=T(()=>import("./search-dynamic-solve-fto-HZREG6ZH-D7Q6dc6u.js"));T(()=>import("./search-dynamic-sgs-unofficial-N4CRUF4Q-z_WJ_FWb.js"));async function _r(){return k(),new f(await(await Gr).getRandomFTOScramble())}var qr=T(()=>import("./search-dynamic-solve-kilominx-GCNVEBDJ-2G9Gtdxb.js"));async function Wr(){return k(),(await qr).getRandomKilominxScramble()}var $r=T(()=>import("./search-dynamic-solve-master_tetraminx-GIS7T5B7-cpxYditX.js"));async function Qr(){return k(),new f(await(await $r).randomMasterTetraminxScrambleString())}var Vr=2,it=null;async function Hr(){return it||(it=(async()=>{const e=await(await K).cachedSGSDataMegaminx();return new ye(await(await K).cachedMegaminxKPuzzleWithoutMO(),e,["U","R","F","L","BR","BL","FR","FL","DR","DL","B","D"])})())}async function jr(e){k();const t=await Hr(),n=structuredClone(e.patternData);n.CENTERS.orientation=new Array(12).fill(0);const r=new b(await(await K).cachedMegaminxKPuzzleWithoutMO(),n);return await t.solve(r,Vr,()=>5)}var Zr=3,at=null;async function Xr(){return at||(at=(async()=>{const e=await(await K).sgsDataPyraminx();return new ye(await M.pyraminx.kpuzzle(),e,"RLUB".split(""))})())}async function Yr(e){return k(),await(await Xr()).solve(e,Zr,()=>3)}var Jr=T(()=>import("./search-dynamic-sgs-unofficial-N4CRUF4Q-z_WJ_FWb.js"));async function ei(){return k(),(await Jr).getRandomRediCubeScramble()}var ti=3,ot=null;async function ni(){return ot||(ot=(async()=>{const e=await(await K).sgsDataSkewb();return new ye(await(await K).skewbKPuzzleWithoutMOCached(),e,"RLUB".split(""))})())}async function ri(e){return new b(await(await K).skewbKPuzzleWithoutMOCached(),{CORNERS:e.patternData.CORNERS,CENTERS:{pieces:e.patternData.CENTERS.pieces,orientation:new Array(6).fill(0)}})}async function ii(e){return k(),await(await ni()).solve(await ri(e),ti,r=>r.family==="y"?4:3)}var ai=1e3;xr(!0);var jt=!0;function oi(e){jt=e}function st(){return(typeof performance>"u"?Date:performance).now()}async function R(e,t,n){if(!jt)return t();const r=st(),i=t();i?.then&&await i;const o=st();return console.warn(`${e}${n?.isPrefetch?" (prefetched)":""}: ${Math.round(o-r)}ms`),i}var Fe=new Map,be=null,ut;async function lt(e,t){return ut=(async()=>{await ut;function n(){return R(`wasmRandomScrambleForEvent(${JSON.stringify(e)})`,()=>Tr(e),{isPrefetch:t?.isPrefetch})}switch(e){case"222":return(await n()).experimentalSimplify({puzzleSpecificSimplifyOptions:{quantumMoveOrder:()=>4}});case"555":case"666":case"777":case"333fm":case"clock":case"minx":case"pyram":case"skewb":case"sq1":case"555bf":case"baby_fto":return n();case"333":case"333oh":case"333ft":return R("random333Scramble",$t,{isPrefetch:t?.isPrefetch});case"333bf":case"333mbf":return R("random333OrientedScramble",Nr);case"444":return R("random444Scramble",Ht,{isPrefetch:t?.isPrefetch});case"444bf":return R("random444OrientedScramble",Kr);case"fto":return R("randomFTOScramble",_r,{isPrefetch:t?.isPrefetch});case"master_tetraminx":return R("randomMasterTetraminxScramble",Qr);case"kilominx":return R("randomKilominxScramble",Wr,{isPrefetch:t?.isPrefetch});case"redi_cube":return R("randomRediCubeScramble",ei,{isPrefetch:t?.isPrefetch});default:throw new Error(`unsupported event: ${e}`)}})()}var Ee="auto",Zt={initialize:async e=>{switch(e){case"222":return R("preInitialize222",Cr);case"333":case"333oh":case"333ft":return R("initialize333",Br);case"444":return R("initialize444",Mr);default:throw new Error(`unsupported event: ${e}`)}},setScramblePrefetchLevel(e){Ee=e},randomScrambleForEvent:async e=>{let t=Fe.get(e);return t?Fe.delete(e):t=lt(e),Ee!=="none"&&t.then(()=>{be&&clearTimeout(be),be=setTimeout(()=>{Fe.set(e,lt(e,{isPrefetch:!0}))},Ee==="immediate"?0:ai)}),t},randomScrambleStringForEvent:async e=>(await Zt.randomScrambleForEvent(e)).toString(),deriveScrambleStringForEvent:async(e,t,n)=>(await R(`deriveScrambleForEvent(, ${JSON.stringify(n)})`,()=>kr(e,t,n))).toString(),solve333ToString:async e=>{const t=new b(await M["3x3x3"].kpuzzle(),e);return(await Wt(t)).toString()},solve222ToString:async e=>{const t=new b(await M["2x2x2"].kpuzzle(),e);return(await Ir(t)).toString()},solveSkewbToString:async e=>{const t=new b(await M.skewb.kpuzzle(),e);return(await ii(t)).toString()},solvePyraminxToString:async e=>{const t=new b(await M.pyraminx.kpuzzle(),e);return(await Yr(t)).toString()},solveMegaminxToString:async e=>{const t=new b(await M.megaminx.kpuzzle(),e);return(await jr(t)).toString()},setDebugMeasurePerf:async e=>{oi(e)},solveTwipsToString:async(e,t,n)=>{const r=new ge(e),i=new b(r,t);return(await Qt(e,i,n)).toString()}};Yt(Zt);var ui=Object.freeze({__proto__:null});export{f as A,z as G,ge as K,a as M,C as Q,vr as a,_e as c,ui as i,M as p,$t as r};
